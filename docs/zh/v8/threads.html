<!DOCTYPE html>
<html lang="zh-CN" data-theme="light">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="VuePress 2.0.0-beta.51" />
    <meta name="theme" content="VuePress Theme Hope" />
    <meta property="og:url" content="https://pro.autojs.org/docs/zh/v8/threads.html"><meta property="og:site_name" content="Auto.js Proæ–‡æ¡£"><meta property="og:title" content="threads - å¤šçº¿ç¨‹"><meta property="og:type" content="article"><meta property="og:updated_time" content="2022-10-22T07:36:15.000Z"><meta property="og:locale" content="zh-CN"><meta property="og:locale:alternate" content="en-US"><meta property="article:modified_time" content="2022-10-22T07:36:15.000Z"><link rel="alternate" hreflang="en-us" href="https://pro.autojs.org/docs/en/zh/v8/threads.html"><link rel="icon" href="https://pro.autojs.org/docs/favicon.ico"><link rel="manifest" href="https://pro.autojs.org/docs/manifest.webmanifest" crossorigin="use-credentials"><meta name="theme-color" content="#46bd87"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover"><title>threads - å¤šçº¿ç¨‹ | Auto.js Proæ–‡æ¡£</title><meta name="description" content="æ”¯æŒNode.jsçš„è‡ªåŠ¨åŒ–å·¥ä½œæµJavaScript IDE">
    <style>
      :root {
        --bg-color: #fff;
      }

      html[data-theme="dark"] {
        --bg-color: #1d2025;
      }

      html,
      body {
        background-color: var(--bg-color);
      }
    </style>
    <script>
      const userMode = localStorage.getItem("vuepress-theme-hope-scheme");
      const systemDarkMode =
        window.matchMedia &&
        window.matchMedia("(prefers-color-scheme: dark)").matches;

      if (userMode === "dark" || (userMode !== "light" && systemDarkMode)) {
        document.querySelector("html").setAttribute("data-theme", "dark");
      }
    </script>
    <link rel="stylesheet" href="../../assets/style.ae9cb182.css">
    <link rel="modulepreload" href="../../assets/app.6aa2b576.js"><link rel="modulepreload" href="../../assets/threads.html.fed6706c.js"><link rel="modulepreload" href="../../assets/_plugin-vue_export-helper.cdc0426e.js"><link rel="modulepreload" href="../../assets/threads.html.0bfa2c6d.js">
  </head>
  <body>


<!-- Copyright © 2008. Spidersoft Ltd -->
<style>
A.applink:hover {border: 2px dotted #DCE6F4;padding:2px;background-color:#ffff00;color:green;text-decoration:none}
A.applink       {border: 2px dotted #DCE6F4;padding:2px;color:#2F5BFF;background:transparent;text-decoration:none}
A.info          {color:#2F5BFF;background:transparent;text-decoration:none}
A.info:hover    {color:green;background:transparent;text-decoration:underline}
</style>
<div style='BORDER: 1px solid #DCE6F4; MARGIN-TOP: 20px; MARGIN-BOTTOM: 20px; MARGIN-LEFT: 5px; MARGIN-RIGHT: 5px; PADDING: 5px; BACKGROUND-COLOR: #eef8ff;line-height:180%; COLOR: #000000; font-family: Arial; font-size: 8pt; width=100%; FILTER: progid:DXImageTransform.Microsoft.Gradient(GradientType=0, StartColorStr="#FFFFFFFF", EndColorStr="#F2F5FAFF");'>
This page was saved using <a class="applink" href="http://www.spidersoft.com"><b>WebZIP 7.1.2.1052</b></a> <a class="applink" href="http://www.spidersoft.com"><b>offline browser</b></a>  on  02/12/23 22:27:19.<br>
<b>Address:</b> <a class="info" href="https://pro.autojs.org/docs/zh/v8/threads.html">https://pro.autojs.org/docs/zh/v8/threads.html</a><br>
<b>Title:</b> threads - å¤šçº¿ç¨‹ | Auto.js Proæ–‡æ¡£ &nbsp;&bull;&nbsp; <b>Size:</b> 92658 &nbsp;&bull;&nbsp; <b>Last Modified:</b> Sun, 12 Feb 2023 12:58:09 GMT<br></div>
<!-- /Copyright © 2008. Spidersoft Ltd -->


    <div id="app"><!--[--><!--[--><!--[--><span tabindex="-1"></span><a href="#main-content" class="skip-link sr-only">Skip to content</a><!--]--><div class="theme-container has-toc"><!--[--><!--[--><header class="navbar"><div class="navbar-left"><button class="toggle-sidebar-button" title="Toggle Sidebar"><span class="icon"></span></button><!----><a href="../../docs.html" class="brand"><img class="logo" src="../../logo.png" alt="Auto.js Proæ–‡æ¡£"><!----><span class="site-name hide-in-pad">Auto.js Proæ–‡æ¡£</span></a><!----></div><div class="navbar-center"><!----><nav class="nav-links"><div class="nav-item hide-in-mobile"><a href="../../docs.html" class="nav-link" aria-label="Auto.js Pro"><span class="icon iconfont icon-home"></span>Auto.js Pro<!----></a></div><div class="nav-item hide-in-mobile"><a href="../guide/guide.html" class="nav-link" aria-label="æŒ‡å—"><span class="icon iconfont icon-creative"></span>æŒ‡å—<!----></a></div><div class="nav-item hide-in-mobile"><a href="v8.html" class="nav-link active" aria-label="ç¬¬ä¸€ä»£APIæ–‡æ¡£"><span class="icon iconfont icon-note"></span>ç¬¬ä¸€ä»£APIæ–‡æ¡£<!----></a></div><div class="nav-item hide-in-mobile"><a href="../v9/v9.html" class="nav-link" aria-label="ç¬¬äºŒä»£APIæ–‡æ¡£"><span class="icon iconfont icon-note"></span>ç¬¬äºŒä»£APIæ–‡æ¡£<!----></a></div><div class="nav-item hide-in-mobile"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="å®˜ç½‘ä¸ç›¸å…³é“¾æ¥"><span class="title"><span class="icon iconfont icon-discover"></span>å®˜ç½‘ä¸ç›¸å…³é“¾æ¥</span><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><a href="../../../pro.autojs.html" rel="noopener noreferrer" target="_blank" aria-label="å®˜ç½‘ä¸è½¯ä»¶ä¸‹è½½" class="nav-link"><!---->å®˜ç½‘ä¸è½¯ä»¶ä¸‹è½½<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!----></a></li><li class="dropdown-item"><a href="https://blog.autojs.org/" rel="noopener noreferrer" target="_blank" aria-label="å®˜æ–¹åšå®¢" class="nav-link"><!---->å®˜æ–¹åšå®¢<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!----></a></li><li class="dropdown-item"><a href="https://pd.qq.com/s/gosos5" rel="noopener noreferrer" target="_blank" aria-label="å®˜æ–¹é¢‘é“" class="nav-link"><!---->å®˜æ–¹é¢‘é“<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!----></a></li></ul></button></div></div></nav><!----></div><div class="navbar-right"><!----><div class="nav-item"><div class="dropdown-wrapper i18n-dropdown"><button class="dropdown-title" type="button" aria-label="é€‰æ‹©è¯­è¨€"><!--[--><svg xmlns="http://www.w3.org/2000/svg" class="icon i18n-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="i18n icon" style="width:1rem;height:1rem;vertical-align:middle;"><path d="M379.392 460.8 494.08 575.488l-42.496 102.4L307.2 532.48 138.24 701.44l-71.68-72.704L234.496 460.8l-45.056-45.056c-27.136-27.136-51.2-66.56-66.56-108.544h112.64c7.68 14.336 16.896 27.136 26.112 35.84l45.568 46.08 45.056-45.056C382.976 312.32 409.6 247.808 409.6 204.8H0V102.4h256V0h102.4v102.4h256v102.4H512c0 70.144-37.888 161.28-87.04 210.944L378.88 460.8zM576 870.4 512 1024H409.6l256-614.4H768l256 614.4H921.6l-64-153.6H576zM618.496 768h196.608L716.8 532.48 618.496 768z"></path></svg><!--]--><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><a href="../../en/en.html" class="nav-link" aria-label="English"><!---->English<!----></a></li><li class="dropdown-item"><a aria-current="page" href="threads.html" class="router-link-active router-link-exact-active nav-link active" aria-label="ç®€ä½“ä¸­æ–‡"><!---->ç®€ä½“ä¸­æ–‡<!----></a></li></ul></button></div></div><!----><div class="nav-item hide-in-mobile"><button id="appearance-switch"><svg xmlns="http://www.w3.org/2000/svg" class="icon auto-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="auto icon" style="display:block;"><path d="M512 992C246.92 992 32 777.08 32 512S246.92 32 512 32s480 214.92 480 480-214.92 480-480 480zm0-840c-198.78 0-360 161.22-360 360 0 198.84 161.22 360 360 360s360-161.16 360-360c0-198.78-161.22-360-360-360zm0 660V212c165.72 0 300 134.34 300 300 0 165.72-134.28 300-300 300z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon dark-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="dark icon" style="display:none;"><path d="M524.8 938.667h-4.267a439.893 439.893 0 0 1-313.173-134.4 446.293 446.293 0 0 1-11.093-597.334A432.213 432.213 0 0 1 366.933 90.027a42.667 42.667 0 0 1 45.227 9.386 42.667 42.667 0 0 1 10.24 42.667 358.4 358.4 0 0 0 82.773 375.893 361.387 361.387 0 0 0 376.747 82.774 42.667 42.667 0 0 1 54.187 55.04 433.493 433.493 0 0 1-99.84 154.88 438.613 438.613 0 0 1-311.467 128z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon light-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="light icon" style="display:none;"><path d="M952 552h-80a40 40 0 0 1 0-80h80a40 40 0 0 1 0 80zM801.88 280.08a41 41 0 0 1-57.96-57.96l57.96-58a41.04 41.04 0 0 1 58 58l-58 57.96zM512 752a240 240 0 1 1 0-480 240 240 0 0 1 0 480zm0-560a40 40 0 0 1-40-40V72a40 40 0 0 1 80 0v80a40 40 0 0 1-40 40zm-289.88 88.08-58-57.96a41.04 41.04 0 0 1 58-58l57.96 58a41 41 0 0 1-57.96 57.96zM192 512a40 40 0 0 1-40 40H72a40 40 0 0 1 0-80h80a40 40 0 0 1 40 40zm30.12 231.92a41 41 0 0 1 57.96 57.96l-57.96 58a41.04 41.04 0 0 1-58-58l58-57.96zM512 832a40 40 0 0 1 40 40v80a40 40 0 0 1-80 0v-80a40 40 0 0 1 40-40zm289.88-88.08 58 57.96a41.04 41.04 0 0 1-58 58l-57.96-58a41 41 0 0 1 57.96-57.96z"></path></svg></button></div><div class="search-box" role="search" data-v-f3875574><input value="" aria-label="Search" class="" placeholder="Search" autocomplete="off" spellcheck="false" data-v-f3875574><!----></div><!----><button class="toggle-navbar-button" aria-label="Toggle Navbar" aria-expanded="false" aria-controls="nav-screen"><span class="button-container"><span class="button-top"></span><span class="button-middle"></span><span class="button-bottom"></span></span></button></div></header><!----><!--]--><!----><div class="toggle-sidebar-wrapper"><span class="arrow left"></span></div><aside class="sidebar"><!--[--><!----><!--]--><ul class="sidebar-links"><li><section class="sidebar-group"><p class="sidebar-heading"><!----><span class="title">æŒ‡å—</span><!----></p><ul class="sidebar-links"><li><!--[--><a href="v8.html" class="nav-link sidebar-link sidebar-page" aria-label="é˜…è¯»é¡»çŸ¥"><!---->é˜…è¯»é¡»çŸ¥<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li></ul></section></li><li><section class="sidebar-group"><p class="sidebar-heading active"><!----><span class="title">APIæ–‡æ¡£</span><!----></p><ul class="sidebar-links"><li><!--[--><a href="app.html" class="nav-link sidebar-link sidebar-page" aria-label="app - åº”ç”¨"><!---->app - åº”ç”¨<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="base64.html" class="nav-link sidebar-link sidebar-page" aria-label="base64"><!---->base64<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="colors.html" class="nav-link sidebar-link sidebar-page" aria-label="colors - é¢œè‰²"><!---->colors - é¢œè‰²<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="canvas.html" class="nav-link sidebar-link sidebar-page" aria-label="canvas - ç”»å¸ƒ"><!---->canvas - ç”»å¸ƒ<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="console.html" class="nav-link sidebar-link sidebar-page" aria-label="console - æ§åˆ¶å°"><!---->console - æ§åˆ¶å°<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="crypto.html" class="nav-link sidebar-link sidebar-page" aria-label="crypto - åŠ è§£å¯†ä¸æ¶ˆæ¯æ‘˜è¦"><!---->crypto - åŠ è§£å¯†ä¸æ¶ˆæ¯æ‘˜è¦<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="debug.html" class="nav-link sidebar-link sidebar-page" aria-label="debug - è°ƒè¯•å·¥å…·"><!---->debug - è°ƒè¯•å·¥å…·<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="device.html" class="nav-link sidebar-link sidebar-page" aria-label="device - è®¾å¤‡"><!---->device - è®¾å¤‡<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="dialogs.html" class="nav-link sidebar-link sidebar-page" aria-label="dialogs - å¯¹è¯æ¡†"><!---->dialogs - å¯¹è¯æ¡†<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="engines.html" class="nav-link sidebar-link sidebar-page" aria-label="engines - è„šæœ¬å¼•æ“"><!---->engines - è„šæœ¬å¼•æ“<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="events.html" class="nav-link sidebar-link sidebar-page" aria-label="events - äº‹ä»¶ä¸ç›‘å¬"><!---->events - äº‹ä»¶ä¸ç›‘å¬<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="floaty.html" class="nav-link sidebar-link sidebar-page" aria-label="floaty - æ‚¬æµ®çª—"><!---->floaty - æ‚¬æµ®çª—<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="files.html" class="nav-link sidebar-link sidebar-page" aria-label="files - æ–‡ä»¶ç³»ç»Ÿ"><!---->files - æ–‡ä»¶ç³»ç»Ÿ<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="globals.html" class="nav-link sidebar-link sidebar-page" aria-label="globals - å…¨å±€å˜é‡ä¸å‡½æ•°"><!---->globals - å…¨å±€å˜é‡ä¸å‡½æ•°<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="http.html" class="nav-link sidebar-link sidebar-page" aria-label="http - HTTPç½‘ç»œè¯·æ±‚"><!---->http - HTTPç½‘ç»œè¯·æ±‚<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="media.html" class="nav-link sidebar-link sidebar-page" aria-label="media - å¤šåª’ä½“"><!---->media - å¤šåª’ä½“<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="modules.html" class="nav-link sidebar-link sidebar-page" aria-label="module - æ¨¡å—"><!---->module - æ¨¡å—<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="plugins.html" class="nav-link sidebar-link sidebar-page" aria-label="plugins - æ’ä»¶"><!---->plugins - æ’ä»¶<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="powerManager.html" class="nav-link sidebar-link sidebar-page" aria-label="power_manager - ç”µæºç®¡ç†"><!---->power_manager - ç”µæºç®¡ç†<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="sensors.html" class="nav-link sidebar-link sidebar-page" aria-label="sensors - ä¼ æ„Ÿå™¨"><!---->sensors - ä¼ æ„Ÿå™¨<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="shell.html" class="nav-link sidebar-link sidebar-page" aria-label="shell - Shellå‘½ä»¤"><!---->shell - Shellå‘½ä»¤<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="storages.html" class="nav-link sidebar-link sidebar-page" aria-label="storages - æœ¬åœ°å­˜å‚¨"><!---->storages - æœ¬åœ°å­˜å‚¨<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="settings.html" class="nav-link sidebar-link sidebar-page" aria-label="settings - è®¾ç½®"><!---->settings - è®¾ç½®<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a aria-current="page" href="threads.html" class="router-link-active router-link-exact-active nav-link active sidebar-link sidebar-page active" aria-label="threads - å¤šçº¿ç¨‹"><!---->threads - å¤šçº¿ç¨‹<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="https://pro.autojs.org/docs/zh/v8/threads.html#threads-start-action" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="threads.start(action)"><!---->threads.start(action)<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="https://pro.autojs.org/docs/zh/v8/threads.html#threads-shutdownall" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="threads.shutDownAll()"><!---->threads.shutDownAll()<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="https://pro.autojs.org/docs/zh/v8/threads.html#threads-currentthread" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="threads.currentThread()"><!---->threads.currentThread()<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="https://pro.autojs.org/docs/zh/v8/threads.html#threads-disposable" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="threads.disposable()"><!---->threads.disposable()<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="https://pro.autojs.org/docs/zh/v8/threads.html#threads-atomic-initialvalue" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="threads.atomic([initialValue])"><!---->threads.atomic([initialValue])<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="https://pro.autojs.org/docs/zh/v8/threads.html#threads-lock" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="threads.lock()"><!---->threads.lock()<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="https://pro.autojs.org/docs/zh/v8/threads.html#thread-interrupt" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="Thread.interrupt()"><!---->Thread.interrupt()<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="https://pro.autojs.org/docs/zh/v8/threads.html#thread-join-timeout" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="Thread.join([timeout])"><!---->Thread.join([timeout])<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="https://pro.autojs.org/docs/zh/v8/threads.html#isalive" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="isAlive()"><!---->isAlive()<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="https://pro.autojs.org/docs/zh/v8/threads.html#waitfor" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="waitFor()"><!---->waitFor()<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="https://pro.autojs.org/docs/zh/v8/threads.html#thread-settimeout-callback-delay-args" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="Thread.setTimeout(callback, delay[, ...args])"><!---->Thread.setTimeout(callback, delay[, ...args])<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="https://pro.autojs.org/docs/zh/v8/threads.html#thread-setinterval-callback-delay-args" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="Thread.setInterval(callback, delay[, ...args])"><!---->Thread.setInterval(callback, delay[, ...args])<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="https://pro.autojs.org/docs/zh/v8/threads.html#thread-setimmediate-callback-args" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="Thread.setImmediate(callback[, ...args])"><!---->Thread.setImmediate(callback[, ...args])<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="https://pro.autojs.org/docs/zh/v8/threads.html#thread-clearinterval-id" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="Thread.clearInterval(id)"><!---->Thread.clearInterval(id)<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="https://pro.autojs.org/docs/zh/v8/threads.html#thread-cleartimeout-id" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="Thread.clearTimeout(id)"><!---->Thread.clearTimeout(id)<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="https://pro.autojs.org/docs/zh/v8/threads.html#thread-clearimmediate-id" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="Thread.clearImmediate(id)"><!---->Thread.clearImmediate(id)<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="https://pro.autojs.org/docs/zh/v8/threads.html#sync-func" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="sync(func)"><!---->sync(func)<!----></a><ul class="sidebar-sub-headers"></ul></li></ul><!--]--></li><li><!--[--><a href="timers.html" class="nav-link sidebar-link sidebar-page" aria-label="timers - å®šæ—¶å™¨"><!---->timers - å®šæ—¶å™¨<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="timedTasks.html" class="nav-link sidebar-link sidebar-page" aria-label="work_manager - å®šæ—¶ä¸ä»»åŠ¡"><!---->work_manager - å®šæ—¶ä¸ä»»åŠ¡<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><section class="sidebar-group"><button class="sidebar-heading clickable"><!----><span class="title">ui - ç”¨æˆ·ç•Œé¢</span><span class="arrow right"></span></button><!----></section></li><li><!--[--><a href="util.html" class="nav-link sidebar-link sidebar-page" aria-label="util - å·¥å…·"><!---->util - å·¥å…·<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="webSocket.html" class="nav-link sidebar-link sidebar-page" aria-label="WebSocket"><!---->WebSocket<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="zip.html" class="nav-link sidebar-link sidebar-page" aria-label="zip - å‹ç¼©ä¸è§£å‹"><!---->zip - å‹ç¼©ä¸è§£å‹<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li></ul></section></li><li><section class="sidebar-group"><p class="sidebar-heading"><!----><span class="title">è¿›é˜¶</span><!----></p><ul class="sidebar-links"><li><!--[--><a href="scriptingJava.html" class="nav-link sidebar-link sidebar-page" aria-label="å’ŒJavaäº¤äº’"><!---->å’ŒJavaäº¤äº’<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li></ul></section></li></ul><!--[--><!----><!--]--></aside><!--[--><main class="page" id="main-content"><!--[--><!----><nav class="breadcrumb disable"></nav><div class="page-title"><h1><!---->threads - å¤šçº¿ç¨‹</h1><div class="page-info"><span class="date-info" aria-label="å†™ä½œæ—¥æœŸğŸ“…" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon calendar-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="calendar icon"><path d="M716.4 110.137c0-18.753-14.72-33.473-33.472-33.473-18.753 0-33.473 14.72-33.473 33.473v33.473h66.993v-33.473zm-334.87 0c0-18.753-14.72-33.473-33.473-33.473s-33.52 14.72-33.52 33.473v33.473h66.993v-33.473zm468.81 33.52H716.4v100.465c0 18.753-14.72 33.473-33.472 33.473a33.145 33.145 0 01-33.473-33.473V143.657H381.53v100.465c0 18.753-14.72 33.473-33.473 33.473a33.145 33.145 0 01-33.473-33.473V143.657H180.6A134.314 134.314 0 0046.66 277.595v535.756A134.314 134.314 0 00180.6 947.289h669.74a134.36 134.36 0 00133.94-133.938V277.595a134.314 134.314 0 00-133.94-133.938zm33.473 267.877H147.126a33.145 33.145 0 01-33.473-33.473c0-18.752 14.72-33.473 33.473-33.473h736.687c18.752 0 33.472 14.72 33.472 33.473a33.145 33.145 0 01-33.472 33.473z"></path></svg><span>2022å¹´10æœˆ22æ—¥</span><meta property="datePublished" content="2022-10-22T07:36:15.000Z"></span></div><hr></div><div class="toc-place-holder"><aside id="toc"><div class="toc-header">æ­¤é¡µå†…å®¹</div><div class="toc-wrapper"><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="https://pro.autojs.org/docs/zh/v8/threads.html#threads-start-action" class="router-link-active router-link-exact-active toc-link level2">threads.start(action)</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="https://pro.autojs.org/docs/zh/v8/threads.html#threads-shutdownall" class="router-link-active router-link-exact-active toc-link level2">threads.shutDownAll()</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="https://pro.autojs.org/docs/zh/v8/threads.html#threads-currentthread" class="router-link-active router-link-exact-active toc-link level2">threads.currentThread()</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="https://pro.autojs.org/docs/zh/v8/threads.html#threads-disposable" class="router-link-active router-link-exact-active toc-link level2">threads.disposable()</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="https://pro.autojs.org/docs/zh/v8/threads.html#threads-atomic-initialvalue" class="router-link-active router-link-exact-active toc-link level2">threads.atomic([initialValue])</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="https://pro.autojs.org/docs/zh/v8/threads.html#threads-lock" class="router-link-active router-link-exact-active toc-link level2">threads.lock()</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="https://pro.autojs.org/docs/zh/v8/threads.html#thread-interrupt" class="router-link-active router-link-exact-active toc-link level2">Thread.interrupt()</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="https://pro.autojs.org/docs/zh/v8/threads.html#thread-join-timeout" class="router-link-active router-link-exact-active toc-link level2">Thread.join([timeout])</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="https://pro.autojs.org/docs/zh/v8/threads.html#isalive" class="router-link-active router-link-exact-active toc-link level2">isAlive()</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="https://pro.autojs.org/docs/zh/v8/threads.html#waitfor" class="router-link-active router-link-exact-active toc-link level2">waitFor()</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="https://pro.autojs.org/docs/zh/v8/threads.html#thread-settimeout-callback-delay-args" class="router-link-active router-link-exact-active toc-link level2">Thread.setTimeout(callback, delay[, ...args])</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="https://pro.autojs.org/docs/zh/v8/threads.html#thread-setinterval-callback-delay-args" class="router-link-active router-link-exact-active toc-link level2">Thread.setInterval(callback, delay[, ...args])</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="https://pro.autojs.org/docs/zh/v8/threads.html#thread-setimmediate-callback-args" class="router-link-active router-link-exact-active toc-link level2">Thread.setImmediate(callback[, ...args])</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="https://pro.autojs.org/docs/zh/v8/threads.html#thread-clearinterval-id" class="router-link-active router-link-exact-active toc-link level2">Thread.clearInterval(id)</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="https://pro.autojs.org/docs/zh/v8/threads.html#thread-cleartimeout-id" class="router-link-active router-link-exact-active toc-link level2">Thread.clearTimeout(id)</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="https://pro.autojs.org/docs/zh/v8/threads.html#thread-clearimmediate-id" class="router-link-active router-link-exact-active toc-link level2">Thread.clearImmediate(id)</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="https://pro.autojs.org/docs/zh/v8/threads.html#sync-func" class="router-link-active router-link-exact-active toc-link level2">sync(func)</a></li><!----><!--]--></ul></div></aside></div><!----><div class="theme-hope-content"><h1 id="threads-å¤šçº¿ç¨‹" tabindex="-1"><a class="header-anchor" href="#threads-å¤šçº¿ç¨‹" aria-hidden="true">#</a> threads - å¤šçº¿ç¨‹</h1><blockquote><p>Stability: 1 - Experiment</p></blockquote><p>threadsæ¨¡å—æä¾›äº†å¤šçº¿ç¨‹æ”¯æŒï¼Œå¯ä»¥å¯åŠ¨æ–°çº¿ç¨‹æ¥è¿è¡Œè„šæœ¬ã€‚</p><p>è„šæœ¬ä¸»çº¿ç¨‹ä¼šç­‰å¾…æ‰€æœ‰å­çº¿ç¨‹æ‰§è¡Œå®Œæˆåæ‰åœæ­¢æ‰§è¡Œï¼Œå› æ­¤å¦‚æœå­çº¿ç¨‹ä¸­æœ‰æ­»å¾ªç¯ï¼Œè¯·åœ¨å¿…è¦çš„æ—¶å€™è°ƒç”¨<code><span class="token function">exit</span><span class="token punctuation">(</span><span class="token punctuation">)</span></code>æ¥ç›´æ¥åœæ­¢è„šæœ¬æˆ–<code>threads<span class="token punctuation">.</span><span class="token function">shutDownAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span></code>æ¥åœæ­¢æ‰€æœ‰å­çº¿ç¨‹ã€‚</p><p>é€šè¿‡<code>threads<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span></code>å¯åŠ¨çš„æ‰€æœ‰çº¿ç¨‹ä¼šåœ¨è„šæœ¬è¢«å¼ºåˆ¶åœæ­¢æ—¶è‡ªåŠ¨åœæ­¢ã€‚</p><p>ç”±äºJavaScriptè‡ªèº«æ²¡æœ‰å¤šçº¿ç¨‹çš„æ”¯æŒï¼Œå› æ­¤æ‚¨å¯èƒ½ä¼šé‡åˆ°æ„æ–™ä¹‹å¤–çš„é—®é¢˜ã€‚</p><h2 id="threads-start-action" tabindex="-1"><a class="header-anchor" href="#threads-start-action" aria-hidden="true">#</a> threads.start(action)</h2><ul><li><code><span class="token property">action</span></code> {Function} è¦åœ¨æ–°çº¿ç¨‹æ‰§è¡Œçš„å‡½æ•°</li><li>è¿”å› {<a href="#threads_thread">Thread</a>}</li></ul><p>å¯åŠ¨ä¸€ä¸ªæ–°çº¿ç¨‹å¹¶æ‰§è¡Œactionã€‚</p><p>ä¾‹å¦‚:</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>threads<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token comment">//åœ¨æ–°çº¿ç¨‹æ‰§è¡Œçš„ä»£ç </span>
    <span class="token keyword">while</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;å­çº¿ç¨‹&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">while</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;è„šæœ¬ä¸»çº¿ç¨‹&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>é€šè¿‡è¯¥å‡½æ•°è¿”å›çš„<a href="#threads_thread">Thread</a>å¯¹è±¡å¯ä»¥è·å–è¯¥çº¿ç¨‹çš„çŠ¶æ€ï¼Œæ§åˆ¶è¯¥çº¿ç¨‹çš„è¿è¡Œä¸­ã€‚ä¾‹å¦‚:</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">var</span> thread <span class="token operator">=</span> threads<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">while</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;å­çº¿ç¨‹&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//åœæ­¢çº¿ç¨‹æ‰§è¡Œ</span>
thread<span class="token punctuation">.</span><span class="token function">interrupt</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æ›´å¤šä¿¡æ¯å‚è§<a href="#threads_thread">Thread</a>ã€‚</p><h2 id="threads-shutdownall" tabindex="-1"><a class="header-anchor" href="#threads-shutdownall" aria-hidden="true">#</a> threads.shutDownAll()</h2><p>åœæ­¢æ‰€æœ‰é€šè¿‡<code>threads<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span></code>å¯åŠ¨çš„å­çº¿ç¨‹ã€‚</p><h2 id="threads-currentthread" tabindex="-1"><a class="header-anchor" href="#threads-currentthread" aria-hidden="true">#</a> threads.currentThread()</h2><ul><li>è¿”å› {<a href="#threads_thread">Thread</a>}</li></ul><p>è¿”å›å½“å‰çº¿ç¨‹ã€‚</p><h2 id="threads-disposable" tabindex="-1"><a class="header-anchor" href="#threads-disposable" aria-hidden="true">#</a> threads.disposable()</h2><ul><li>è¿”å› {<a href="#threads_disposable">Disposable</a>}</li></ul><p>æ–°å»ºä¸€ä¸ªDisposableå¯¹è±¡ï¼Œç”¨äºç­‰å¾…å¦ä¸€ä¸ªçº¿ç¨‹çš„æŸä¸ªä¸€æ¬¡æ€§ç»“æœã€‚æ›´å¤šä¿¡æ¯å‚è§<a href="#threads_%E7%BA%BF%E7%A8%8B%E9%80%9A%E4%BF%A1">çº¿ç¨‹é€šä¿¡</a>ä»¥åŠ<a href="#threads_disposable">Disposable</a>ã€‚</p><h2 id="threads-atomic-initialvalue" tabindex="-1"><a class="header-anchor" href="#threads-atomic-initialvalue" aria-hidden="true">#</a> threads.atomic([initialValue])</h2><ul><li><code><span class="token property">initialValue</span></code> {number} åˆå§‹æ•´æ•°å€¼ï¼Œé»˜è®¤ä¸º0</li><li>è¿”å› {<a href="https://docs.oracle.com/javase/7/docs/api/java/util/concurrent/atomic/AtomicLong.html" target="_blank" rel="noopener noreferrer">AtomicLong<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>}</li></ul><p>æ–°å»ºä¸€ä¸ªæ•´æ•°åŸå­å˜é‡ã€‚æ›´å¤šä¿¡æ¯å‚è§<a href="#threads_%E7%BA%BF%E7%A8%8B%E5%AE%89%E5%85%A8">çº¿ç¨‹å®‰å…¨</a>ä»¥åŠ<a href="https://docs.oracle.com/javase/7/docs/api/java/util/concurrent/atomic/AtomicLong.html" target="_blank" rel="noopener noreferrer">AtomicLong<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>ã€‚</p><h2 id="threads-lock" tabindex="-1"><a class="header-anchor" href="#threads-lock" aria-hidden="true">#</a> threads.lock()</h2><ul><li>è¿”å› {<a href="https://docs.oracle.com/javase/7/docs/api/java/util/concurrent/locks/ReentrantLock.html" target="_blank" rel="noopener noreferrer">ReentrantLock<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>}</li></ul><p>æ–°å»ºä¸€ä¸ªå¯é‡å…¥é”ã€‚æ›´å¤šä¿¡æ¯å‚è§<a href="#threads_%E7%BA%BF%E7%A8%8B%E5%AE%89%E5%85%A8">çº¿ç¨‹å®‰å…¨</a>ä»¥åŠ<a href="https://docs.oracle.com/javase/7/docs/api/java/util/concurrent/locks/ReentrantLock.html" target="_blank" rel="noopener noreferrer">ReentrantLock<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>ã€‚</p><h1 id="thread" tabindex="-1"><a class="header-anchor" href="#thread" aria-hidden="true">#</a> Thread</h1><p>çº¿ç¨‹å¯¹è±¡ï¼Œ<code>threads<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span></code>è¿”å›çš„å¯¹è±¡ï¼Œç”¨äºè·å–å’Œæ§åˆ¶çº¿ç¨‹çš„çŠ¶æ€ï¼Œä¸å…¶ä»–çº¿ç¨‹äº¤äº’ç­‰ã€‚</p><p>Threadå¯¹è±¡æä¾›äº†å’Œtimersæ¨¡å—ä¸€æ ·çš„APIï¼Œä¾‹å¦‚<code><span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">)</span></code>, <code><span class="token function">setInterval</span><span class="token punctuation">(</span><span class="token punctuation">)</span></code>ç­‰ï¼Œç”¨äºåœ¨è¯¥çº¿ç¨‹æ‰§è¡Œç›¸åº”çš„å®šæ—¶å›è°ƒï¼Œä»è€Œä½¿çº¿ç¨‹ä¹‹é—´å¯ä»¥ç›´æ¥äº¤äº’ã€‚ä¾‹å¦‚ï¼š</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">var</span> thread <span class="token operator">=</span> threads<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token comment">//åœ¨å­çº¿ç¨‹æ‰§è¡Œçš„å®šæ—¶å™¨</span>
    <span class="token function">setInterval</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;å­çº¿ç¨‹:&quot;</span> <span class="token operator">+</span> threads<span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;å½“å‰çº¿ç¨‹ä¸ºä¸»çº¿ç¨‹:&quot;</span> <span class="token operator">+</span> threads<span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//ç­‰å¾…å­çº¿ç¨‹å¯åŠ¨</span>
thread<span class="token punctuation">.</span><span class="token function">waitFor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//åœ¨å­çº¿ç¨‹æ‰§è¡Œçš„å®šæ—¶å™¨</span>
thread<span class="token punctuation">.</span><span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token comment">//è¿™æ®µä»£ç ä¼šåœ¨å­çº¿ç¨‹æ‰§è¡Œ</span>
    <span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;å½“å‰çº¿ç¨‹ä¸ºå­çº¿ç¨‹:&quot;</span> <span class="token operator">+</span> threads<span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">2000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">30</span> <span class="token operator">*</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
thread<span class="token punctuation">.</span><span class="token function">interrupt</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="thread-interrupt" tabindex="-1"><a class="header-anchor" href="#thread-interrupt" aria-hidden="true">#</a> Thread.interrupt()</h2><p>ä¸­æ–­çº¿ç¨‹è¿è¡Œã€‚</p><h2 id="thread-join-timeout" tabindex="-1"><a class="header-anchor" href="#thread-join-timeout" aria-hidden="true">#</a> Thread.join([timeout])</h2><ul><li><code><span class="token property">timeout</span></code> {number} ç­‰å¾…æ—¶é—´ï¼Œå•ä½æ¯«ç§’</li></ul><p>ç­‰å¾…çº¿ç¨‹æ‰§è¡Œå®Œæˆã€‚å¦‚æœtimeoutä¸º0ï¼Œåˆ™ä¼šä¸€ç›´ç­‰å¾…ç›´è‡³è¯¥çº¿ç¨‹æ‰§è¡Œå®Œæˆï¼›å¦åˆ™æœ€å¤šç­‰å¾…timeoutæ¯«ç§’çš„æ—¶é—´ã€‚</p><p>ä¾‹å¦‚:</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">var</span> sum <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token comment">//å¯åŠ¨å­çº¿ç¨‹è®¡ç®—1åŠ åˆ°10000</span>
<span class="token keyword">var</span> thread <span class="token operator">=</span> threads<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">10000</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        sum <span class="token operator">+=</span> i<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//ç­‰å¾…è¯¥çº¿ç¨‹å®Œæˆ</span>
thread<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">toast</span><span class="token punctuation">(</span><span class="token string">&quot;sum = &quot;</span> <span class="token operator">+</span> sum<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="isalive" tabindex="-1"><a class="header-anchor" href="#isalive" aria-hidden="true">#</a> isAlive()</h2><ul><li>è¿”å› {boolean}</li></ul><p>è¿”å›çº¿ç¨‹æ˜¯å¦å­˜æ´»ã€‚å¦‚æœçº¿ç¨‹ä»æœªå¼€å§‹æˆ–å·²ç»ç»“æŸï¼Œè¿”å›<code><span class="token boolean">false</span></code>; å¦‚æœçº¿ç¨‹å·²ç»å¼€å§‹æˆ–è€…æ­£åœ¨è¿è¡Œä¸­ï¼Œè¿”å›<code><span class="token boolean">true</span></code>ã€‚</p><h2 id="waitfor" tabindex="-1"><a class="header-anchor" href="#waitfor" aria-hidden="true">#</a> waitFor()</h2><p>ç­‰å¾…çº¿ç¨‹å¼€å§‹æ‰§è¡Œã€‚è°ƒç”¨<code>threads<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span></code>ä»¥åçº¿ç¨‹ä»ç„¶éœ€è¦ä¸€å®šæ—¶é—´æ‰èƒ½å¼€å§‹æ‰§è¡Œï¼Œå› æ­¤è°ƒç”¨æ­¤å‡½æ•°ä¼šç­‰å¾…çº¿ç¨‹å¼€å§‹æ‰§è¡Œï¼›å¦‚æœçº¿ç¨‹å·²ç»å¤„äºæ‰§è¡ŒçŠ¶æ€åˆ™ç«‹å³è¿”å›ã€‚</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">var</span> thread <span class="token operator">=</span> threads<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token comment">//do something</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
thread<span class="token punctuation">.</span><span class="token function">waitFor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
thread<span class="token punctuation">.</span><span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token comment">//do something</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="thread-settimeout-callback-delay-args" tabindex="-1"><a class="header-anchor" href="#thread-settimeout-callback-delay-args" aria-hidden="true">#</a> Thread.setTimeout(callback, delay[, ...args])</h2><p>å‚è§<a href="https://pro.autojs.org/docs/zh/v8/timers.html#timers_settimeout_callback_delay_args" class="">timers.setTimeout()</a>ã€‚</p><p>åŒºåˆ«åœ¨äº, è¯¥å®šæ—¶å™¨ä¼šåœ¨è¯¥çº¿ç¨‹æ‰§è¡Œã€‚å¦‚æœå½“å‰çº¿ç¨‹ä»æœªå¼€å§‹æ‰§è¡Œæˆ–å·²ç»æ‰§è¡Œç»“æŸï¼Œåˆ™æŠ›å‡º<code><span class="token property">IllegalStateException</span></code>ã€‚</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;å½“å‰çº¿ç¨‹(ä¸»çº¿ç¨‹):&quot;</span> <span class="token operator">+</span> threads<span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> thread <span class="token operator">=</span> threads<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token comment">//è®¾ç½®ä¸€ä¸ªç©ºçš„å®šæ—¶æ¥ä¿æŒçº¿ç¨‹çš„è¿è¡ŒçŠ¶æ€</span>
    <span class="token function">setInterval</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
thread<span class="token punctuation">.</span><span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;å½“å‰çº¿ç¨‹(å­çº¿ç¨‹):&quot;</span> <span class="token operator">+</span> threads<span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">exit</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="thread-setinterval-callback-delay-args" tabindex="-1"><a class="header-anchor" href="#thread-setinterval-callback-delay-args" aria-hidden="true">#</a> Thread.setInterval(callback, delay[, ...args])</h2><p>å‚è§<a href="https://pro.autojs.org/docs/zh/v8/timers.html#timers_setinterval_callback_delay_args" class="">timers.setInterval()</a>ã€‚</p><p>åŒºåˆ«åœ¨äº, è¯¥å®šæ—¶å™¨ä¼šåœ¨è¯¥çº¿ç¨‹æ‰§è¡Œã€‚å¦‚æœå½“å‰çº¿ç¨‹ä»æœªå¼€å§‹æ‰§è¡Œæˆ–å·²ç»æ‰§è¡Œç»“æŸï¼Œåˆ™æŠ›å‡º<code><span class="token property">IllegalStateException</span></code>ã€‚</p><h2 id="thread-setimmediate-callback-args" tabindex="-1"><a class="header-anchor" href="#thread-setimmediate-callback-args" aria-hidden="true">#</a> Thread.setImmediate(callback[, ...args])</h2><p>å‚è§<a href="https://pro.autojs.org/docs/zh/v8/timers.html#timers_setimmediate_callback_delay_args" class="">timers.setImmediate()</a>ã€‚</p><p>åŒºåˆ«åœ¨äº, è¯¥å®šæ—¶å™¨ä¼šåœ¨è¯¥çº¿ç¨‹æ‰§è¡Œã€‚å¦‚æœå½“å‰çº¿ç¨‹ä»æœªå¼€å§‹æ‰§è¡Œæˆ–å·²ç»æ‰§è¡Œç»“æŸï¼Œåˆ™æŠ›å‡º<code><span class="token property">IllegalStateException</span></code>ã€‚</p><h2 id="thread-clearinterval-id" tabindex="-1"><a class="header-anchor" href="#thread-clearinterval-id" aria-hidden="true">#</a> Thread.clearInterval(id)</h2><p>å‚è§<a href="https://pro.autojs.org/docs/zh/v8/timers.html#timers_clearinterval_id" class="">timers.clearInterval()</a>ã€‚</p><p>åŒºåˆ«åœ¨äº, è¯¥å®šæ—¶å™¨ä¼šåœ¨è¯¥çº¿ç¨‹æ‰§è¡Œã€‚å¦‚æœå½“å‰çº¿ç¨‹ä»æœªå¼€å§‹æ‰§è¡Œæˆ–å·²ç»æ‰§è¡Œç»“æŸï¼Œåˆ™æŠ›å‡º<code><span class="token property">IllegalStateException</span></code>ã€‚</p><h2 id="thread-cleartimeout-id" tabindex="-1"><a class="header-anchor" href="#thread-cleartimeout-id" aria-hidden="true">#</a> Thread.clearTimeout(id)</h2><p>å‚è§<a href="https://pro.autojs.org/docs/zh/v8/timers.html#timers_cleartimeout_id" class="">timers.clearTimeout()</a>ã€‚</p><p>åŒºåˆ«åœ¨äº, è¯¥å®šæ—¶å™¨ä¼šåœ¨è¯¥çº¿ç¨‹æ‰§è¡Œã€‚å¦‚æœå½“å‰çº¿ç¨‹ä»æœªå¼€å§‹æ‰§è¡Œæˆ–å·²ç»æ‰§è¡Œç»“æŸï¼Œåˆ™æŠ›å‡º<code><span class="token property">IllegalStateException</span></code>ã€‚</p><h2 id="thread-clearimmediate-id" tabindex="-1"><a class="header-anchor" href="#thread-clearimmediate-id" aria-hidden="true">#</a> Thread.clearImmediate(id)</h2><p>å‚è§<a href="https://pro.autojs.org/docs/zh/v8/timers.html#timers_clearimmediate_id" class="">timers.clearImmediate()</a>ã€‚</p><p>åŒºåˆ«åœ¨äº, è¯¥å®šæ—¶å™¨ä¼šåœ¨è¯¥çº¿ç¨‹æ‰§è¡Œã€‚å¦‚æœå½“å‰çº¿ç¨‹ä»æœªå¼€å§‹æ‰§è¡Œæˆ–å·²ç»æ‰§è¡Œç»“æŸï¼Œåˆ™æŠ›å‡º<code><span class="token property">IllegalStateException</span></code>ã€‚</p><h1 id="çº¿ç¨‹å®‰å…¨" tabindex="-1"><a class="header-anchor" href="#çº¿ç¨‹å®‰å…¨" aria-hidden="true">#</a> çº¿ç¨‹å®‰å…¨</h1><p>çº¿ç¨‹å®‰å…¨é—®é¢˜æ˜¯ä¸€ä¸ªç›¸å¯¹ä¸“ä¸šçš„ç¼–ç¨‹é—®é¢˜ï¼Œæœ¬ç« èŠ‚åªæä¾›ç»™æœ‰éœ€è¦çš„ç”¨æˆ·ã€‚</p><p>å¼•ç”¨ç»´åŸºç™¾ç§‘çš„è§£é‡Šï¼š</p><blockquote><p>çº¿ç¨‹å®‰å…¨æ˜¯ç¼–ç¨‹ä¸­çš„æœ¯è¯­ï¼ŒæŒ‡æŸä¸ªå‡½æ•°ã€å‡½æ•°åº“åœ¨å¤šçº¿ç¨‹ç¯å¢ƒä¸­è¢«è°ƒç”¨æ—¶ï¼Œèƒ½å¤Ÿæ­£ç¡®åœ°å¤„ç†å¤šä¸ªçº¿ç¨‹ä¹‹é—´çš„å…±äº«å˜é‡ï¼Œä½¿ç¨‹åºåŠŸèƒ½æ­£ç¡®å®Œæˆã€‚</p></blockquote><p>åœ¨Auto.jsä¸­ï¼Œçº¿ç¨‹é—´å˜é‡åœ¨ç¬¦åˆJavaScriptå˜é‡ä½œç”¨åŸŸè§„åˆ™çš„å‰æä¸‹æ˜¯å…±äº«çš„ï¼Œä¾‹å¦‚å…¨å±€å˜é‡åœ¨æ‰€æœ‰çº¿ç¨‹éƒ½èƒ½è®¿é—®ï¼Œå¹¶ä¸”ä¿è¯ä»–ä»¬åœ¨æ‰€æœ‰çº¿ç¨‹çš„å¯è§æ€§ã€‚ä½†æ˜¯ï¼Œä¸ä¿è¯ä»»ä½•æ“ä½œçš„åŸå­æ€§ã€‚ä¾‹å¦‚ç»å…¸çš„è‡ªå¢&quot;i++&quot;å°†ä¸æ˜¯åŸå­æ€§æ“ä½œã€‚</p><p>Rhinoå’ŒAuto.jsæä¾›äº†ä¸€äº›ç®€å•çš„è®¾æ–½æ¥è§£å†³ç®€å•çš„çº¿ç¨‹å®‰å…¨é—®é¢˜ï¼Œå¦‚é”<code>threads<span class="token punctuation">.</span><span class="token function">lock</span><span class="token punctuation">(</span><span class="token punctuation">)</span></code>, å‡½æ•°åŒæ­¥é”<code><span class="token function">sync</span><span class="token punctuation">(</span><span class="token punctuation">)</span></code>, æ•´æ•°åŸå­å˜é‡<code>threads<span class="token punctuation">.</span><span class="token function">atomic</span><span class="token punctuation">(</span><span class="token punctuation">)</span></code>ç­‰ã€‚</p><p>ä¾‹å¦‚ï¼Œå¯¹äºå¤šçº¿ç¨‹å…±äº«ä¸‹çš„æ•´æ•°çš„è‡ªå¢æ“ä½œ(è‡ªå¢æ“ä½œä¼šå¯¼è‡´é—®é¢˜ï¼Œæ˜¯å› ä¸ºè‡ªå¢æ“ä½œå®é™…ä¸Šä¸º<code>i <span class="token operator">=</span> i <span class="token operator">+</span> <span class="token number">1</span></code>ï¼Œä¹Ÿå°±æ˜¯å…ˆè¯»å–içš„å€¼, æŠŠä»–åŠ 1, å†èµ‹å€¼ç»™i, å¦‚æœä¸¤ä¸ªçº¿ç¨‹åŒæ—¶è¿›è¡Œè‡ªå¢æ“ä½œï¼Œå¯èƒ½å‡ºç°içš„å€¼åªå¢åŠ äº†1çš„æƒ…å†µ)ï¼Œåº”è¯¥ä½¿ç”¨<code>threads<span class="token punctuation">.</span><span class="token function">atomic</span><span class="token punctuation">(</span><span class="token punctuation">)</span></code>å‡½æ•°æ¥æ–°å»ºä¸€ä¸ªæ•´æ•°åŸå­å˜é‡ï¼Œæˆ–è€…ä½¿ç”¨é”<code>threads<span class="token punctuation">.</span><span class="token function">lock</span><span class="token punctuation">(</span><span class="token punctuation">)</span></code>æ¥ä¿è¯æ“ä½œçš„åŸå­æ€§ï¼Œæˆ–è€…ç”¨<code><span class="token function">sync</span><span class="token punctuation">(</span><span class="token punctuation">)</span></code>æ¥å¢åŠ åŒæ­¥é”ã€‚</p><p>çº¿ç¨‹ä¸å®‰å…¨çš„ä»£ç å¦‚ä¸‹ï¼š</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
threads<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">while</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token function">log</span><span class="token punctuation">(</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">while</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token function">log</span><span class="token punctuation">(</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æ­¤æ®µä»£ç è¿è¡Œåæ‰“å¼€æ—¥å¿—ï¼Œå¯ä»¥çœ‹åˆ°æ—¥å¿—ä¸­æœ‰é‡å¤çš„å€¼å‡ºç°ã€‚</p><p>ä½¿ç”¨<code>threads<span class="token punctuation">.</span><span class="token function">atomic</span><span class="token punctuation">(</span><span class="token punctuation">)</span></code>çš„çº¿ç¨‹å®‰å…¨çš„ä»£ç å¦‚ä¸‹:</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">//atomicè¿”å›çš„å¯¹è±¡ä¿è¯äº†è‡ªå¢çš„åŸå­æ€§</span>
<span class="token keyword">var</span> i <span class="token operator">=</span> threads<span class="token punctuation">.</span><span class="token function">atomic</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
threads<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">while</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token function">log</span><span class="token punctuation">(</span>i<span class="token punctuation">.</span><span class="token function">getAndIncrement</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">while</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token function">log</span><span class="token punctuation">(</span>i<span class="token punctuation">.</span><span class="token function">getAndIncrement</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æˆ–è€…:</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">//é”ä¿è¯äº†æ“ä½œçš„åŸå­æ€§</span>
<span class="token keyword">var</span> lock <span class="token operator">=</span> threads<span class="token punctuation">.</span><span class="token function">lock</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
threads<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">while</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        lock<span class="token punctuation">.</span><span class="token function">lock</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">log</span><span class="token punctuation">(</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        lock<span class="token punctuation">.</span><span class="token function">unlock</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">while</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    lock<span class="token punctuation">.</span><span class="token function">lock</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">log</span><span class="token punctuation">(</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    lock<span class="token punctuation">.</span><span class="token function">unlock</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æˆ–è€…:</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">//syncå‡½æ•°ä¼šæŠŠé‡Œé¢çš„å‡½æ•°åŠ ä¸ŠåŒæ­¥é”ï¼Œä½¿å¾—åœ¨åŒä¸€æ—¶åˆ»æœ€å¤šåªèƒ½æœ‰ä¸€ä¸ªçº¿ç¨‹æ‰§è¡Œè¿™ä¸ªå‡½æ•°</span>
<span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> getAndIncrement <span class="token operator">=</span> <span class="token function">sync</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">return</span> i<span class="token operator">++</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
threads<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">while</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token function">log</span><span class="token punctuation">(</span><span class="token function">getAndIncrement</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">while</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token function">log</span><span class="token punctuation">(</span><span class="token function">getAndIncrement</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å¦å¤–ï¼Œæ•°ç»„Arrayä¸æ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Œå¦‚æœæœ‰è¿™ç§å¤æ‚çš„éœ€æ±‚ï¼Œè¯·ç”¨Androidå’ŒJavaç›¸å…³APIæ¥å®ç°ã€‚ä¾‹å¦‚<code><span class="token property">CopyOnWriteList</span></code>, <code><span class="token property">Vector</span></code>ç­‰éƒ½æ˜¯ä»£æ›¿æ•°ç»„çš„çº¿ç¨‹å®‰å…¨çš„ç±»ï¼Œç”¨äºä¸åŒçš„åœºæ™¯ã€‚ä¾‹å¦‚:</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">var</span> nums <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>Vector</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
nums<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token number">123</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
nums<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token number">456</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">toast</span><span class="token punctuation">(</span><span class="token string">&quot;é•¿åº¦ä¸º&quot;</span> <span class="token operator">+</span> nums<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">toast</span><span class="token punctuation">(</span><span class="token string">&quot;ç¬¬ä¸€ä¸ªå…ƒç´ ä¸º&quot;</span> <span class="token operator">+</span> nums<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ä½†å¾ˆæ˜æ˜¾çš„æ˜¯ï¼Œè¿™äº›ç±»ä¸åƒæ•°ç»„é‚£æ ·ç®€ä¾¿æ˜“ç”¨ï¼Œä¹Ÿä¸èƒ½ä½¿ç”¨è¯¸å¦‚<code><span class="token function">slice</span><span class="token punctuation">(</span><span class="token punctuation">)</span></code>ä¹‹ç±»çš„æ–¹ä¾¿çš„å‡½æ•°ã€‚åœ¨æœªæ¥å¯èƒ½ä¼šåŠ å…¥çº¿ç¨‹å®‰å…¨çš„æ•°ç»„æ¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚å½“ç„¶æ‚¨ä¹Ÿå¯ä»¥ä¸ºæ¯ä¸ªæ•°ç»„çš„æ“ä½œåŠ é”æ¥è§£å†³çº¿ç¨‹å®‰å…¨é—®é¢˜ï¼š</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">var</span> nums <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> numsLock <span class="token operator">=</span> threads<span class="token punctuation">.</span><span class="token function">lock</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
threads<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token comment">//å‘æ•°ç»„æ·»åŠ å…ƒç´ 123</span>
    numsLock<span class="token punctuation">.</span><span class="token function">lock</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    nums<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token number">123</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;çº¿ç¨‹: %s, æ•°ç»„: %s&quot;</span><span class="token punctuation">,</span> threads<span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> nums<span class="token punctuation">)</span><span class="token punctuation">;</span>
    numsLock<span class="token punctuation">.</span><span class="token function">unlock</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

threads<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token comment">//å‘æ•°ç»„æ·»åŠ å…ƒç´ 456</span>
    numsLock<span class="token punctuation">.</span><span class="token function">lock</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    nums<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token number">456</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;çº¿ç¨‹: %s, æ•°ç»„: %s&quot;</span><span class="token punctuation">,</span> threads<span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> nums<span class="token punctuation">)</span><span class="token punctuation">;</span>
    numsLock<span class="token punctuation">.</span><span class="token function">unlock</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//åˆ é™¤æ•°ç»„æœ€åä¸€ä¸ªå…ƒç´ </span>
numsLock<span class="token punctuation">.</span><span class="token function">lock</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
nums<span class="token punctuation">.</span><span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;çº¿ç¨‹: %s, æ•°ç»„: %s&quot;</span><span class="token punctuation">,</span> threads<span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> nums<span class="token punctuation">)</span><span class="token punctuation">;</span>
numsLock<span class="token punctuation">.</span><span class="token function">unlock</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="sync-func" tabindex="-1"><a class="header-anchor" href="#sync-func" aria-hidden="true">#</a> sync(func)</h2><ul><li><code><span class="token property">func</span></code> {Function} å‡½æ•°</li><li>è¿”å› {Function}</li></ul><p>ç»™å‡½æ•°funcåŠ ä¸ŠåŒæ­¥é”å¹¶ä½œä¸ºä¸€ä¸ªæ–°å‡½æ•°è¿”å›ã€‚</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token keyword">function</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token parameter">x</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    i <span class="token operator">+=</span> x<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">var</span> syncAdd <span class="token operator">=</span> <span class="token function">sync</span><span class="token punctuation">(</span>add<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">syncAdd</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">toast</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h1 id="çº¿ç¨‹é€šä¿¡" tabindex="-1"><a class="header-anchor" href="#çº¿ç¨‹é€šä¿¡" aria-hidden="true">#</a> çº¿ç¨‹é€šä¿¡</h1><p>Auto.jsæä¾›äº†ä¸€äº›ç®€å•çš„è®¾æ–½æ¥æ”¯æŒç®€å•çš„çº¿ç¨‹é€šä¿¡ã€‚<code>threads<span class="token punctuation">.</span><span class="token function">disposable</span><span class="token punctuation">(</span><span class="token punctuation">)</span></code>ç”¨äºä¸€ä¸ªçº¿ç¨‹ç­‰å¾…å¦ä¸€ä¸ªçº¿ç¨‹çš„(ä¸€æ¬¡æ€§)ç»“æœï¼ŒåŒæ—¶<code>Lock<span class="token punctuation">.</span><span class="token function">newCondition</span><span class="token punctuation">(</span><span class="token punctuation">)</span></code>æä¾›äº†Conditionå¯¹è±¡ç”¨äºä¸€èˆ¬çš„çº¿ç¨‹é€šä¿¡(await, signal)ã€‚å¦å¤–ï¼Œ<code><span class="token property">events</span></code>æ¨¡å—ä¹Ÿå¯ä»¥ç”¨äºçº¿ç¨‹é€šä¿¡ï¼Œé€šè¿‡æŒ‡å®š<code><span class="token property">EventEmitter</span></code>çš„å›è°ƒæ‰§è¡Œçš„çº¿ç¨‹æ¥å®ç°ã€‚</p><p>ä½¿ç”¨<code>threads<span class="token punctuation">.</span><span class="token function">disposable</span><span class="token punctuation">(</span><span class="token punctuation">)</span></code>å¯ä»¥ç®€å•åœ°ç­‰å¾…å’Œè·å–æŸä¸ªçº¿ç¨‹çš„æ‰§è¡Œç»“æœã€‚ä¾‹å¦‚è¦ç­‰å¾…æŸä¸ªçº¿ç¨‹è®¡ç®—&quot;1+.....+10000&quot;:</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">var</span> sum <span class="token operator">=</span> threads<span class="token punctuation">.</span><span class="token function">disposable</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//å¯åŠ¨å­çº¿ç¨‹è®¡ç®—</span>
threads<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">var</span> s <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token comment">//ä»1åŠ åˆ°10000</span>
    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> <span class="token number">10000</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        s <span class="token operator">+=</span> i<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">//é€šçŸ¥ä¸»çº¿ç¨‹æ¥æ”¶ç»“æœ</span>
    sum<span class="token punctuation">.</span><span class="token function">setAndNotify</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//blockedGet()ç”¨äºç­‰å¾…ç»“æœ</span>
<span class="token function">toast</span><span class="token punctuation">(</span><span class="token string">&quot;sum = &quot;</span> <span class="token operator">+</span> sum<span class="token punctuation">.</span><span class="token function">blockedGet</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å¦‚æœä¸Šè¿°ä»£ç ç”¨<code><span class="token property">Condition</span></code>å®ç°ï¼š</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">//æ–°å»ºä¸€ä¸ªé”</span>
<span class="token keyword">var</span> lock <span class="token operator">=</span> threads<span class="token punctuation">.</span><span class="token function">lock</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//æ–°å»ºä¸€ä¸ªæ¡ä»¶ï¼Œå³&quot;è®¡ç®—å®Œæˆ&quot;</span>
<span class="token keyword">var</span> complete <span class="token operator">=</span> lock<span class="token punctuation">.</span><span class="token function">newCondition</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> sum <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
threads<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token comment">//ä»1åŠ åˆ°10000</span>
    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> <span class="token number">10000</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        sum <span class="token operator">+=</span> i<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">//é€šçŸ¥ä¸»çº¿ç¨‹æ¥æ”¶ç»“æœ</span>
    lock<span class="token punctuation">.</span><span class="token function">lock</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    complete<span class="token punctuation">.</span><span class="token function">signal</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    lock<span class="token punctuation">.</span><span class="token function">unlock</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//ç­‰å¾…è®¡ç®—å®Œæˆ</span>
lock<span class="token punctuation">.</span><span class="token function">lock</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
complete<span class="token punctuation">.</span><span class="token function">await</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
lock<span class="token punctuation">.</span><span class="token function">unlock</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//æ‰“å°ç»“æœ</span>
<span class="token function">toast</span><span class="token punctuation">(</span><span class="token string">&quot;sum = &quot;</span> <span class="token operator">+</span> sum<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å¦‚æœä¸Šè¯‰ä»£ç ç”¨<code><span class="token property">events</span></code>æ¨¡å—å®ç°ï¼š</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">//æ–°å»ºä¸€ä¸ªemitter, å¹¶æŒ‡å®šå›è°ƒæ‰§è¡Œçš„çº¿ç¨‹ä¸ºå½“å‰çº¿ç¨‹</span>
<span class="token keyword">var</span> sum <span class="token operator">=</span> events<span class="token punctuation">.</span><span class="token function">emitter</span><span class="token punctuation">(</span>threads<span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
threads<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">var</span> s <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token comment">//ä»1åŠ åˆ°10000</span>
    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> <span class="token number">10000</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        s <span class="token operator">+=</span> i<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">//å‘é€äº‹ä»¶resulté€šçŸ¥ä¸»çº¿ç¨‹æ¥æ”¶ç»“æœ</span>
    sum<span class="token punctuation">.</span><span class="token function">emit</span><span class="token punctuation">(</span><span class="token string">&#39;result&#39;</span><span class="token punctuation">,</span> s<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
sum<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">&#39;result&#39;</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">s</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token function">toastLog</span><span class="token punctuation">(</span><span class="token string">&quot;sum = &quot;</span> <span class="token operator">+</span> s <span class="token operator">+</span> <span class="token string">&quot;, å½“å‰çº¿ç¨‹: &quot;</span> <span class="token operator">+</span> threads<span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æœ‰å…³çº¿ç¨‹çš„å…¶ä»–é—®é¢˜ï¼Œä¾‹å¦‚ç”Ÿäº§è€…æ¶ˆè´¹è€…ç­‰é—®é¢˜ï¼Œè¯·ç”¨Javaç›¸å…³æ–¹æ³•è§£å†³ï¼Œä¾‹å¦‚<code>java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>concurrent<span class="token punctuation">.</span>BlockingQueue</code>ã€‚</p></div><!----><footer class="page-meta"><!----><div class="meta-item update-time"><span class="label">ä¸Šæ¬¡ç¼–è¾‘äº: </span><!----></div><div class="meta-item contributors"><span class="label">è´¡çŒ®è€…: </span><!--[--><!--[--><span class="contributor" title="email: 946994919@qq.com">hyb1996</span><!--]--><!--]--></div></footer><nav class="page-nav"><a href="settings.html" class="nav-link prev" aria-label="settings - è®¾ç½®"><div class="hint"><span class="arrow left"></span>ä¸Šä¸€é¡µ</div><div class="link"><!---->settings - è®¾ç½®</div></a><a href="timers.html" class="nav-link next" aria-label="timers - å®šæ—¶å™¨"><div class="hint">ä¸‹ä¸€é¡µ<span class="arrow right"></span></div><div class="link">timers - å®šæ—¶å™¨<!----></div></a></nav><!----><!----><!--]--></main><!--]--><!----><!--]--></div><!--]--><!----><!----><!--]--></div>
    <script type="module" src="../../assets/app.6aa2b576.js" defer></script>
  </body>
</html>
