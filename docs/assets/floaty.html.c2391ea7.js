import{_ as n}from"./_plugin-vue_export-helper.cdc0426e.js";import{o as a,c as s,e}from"./app.6aa2b576.js";const t={},o=e(`<h1 id="floaty" tabindex="-1"><a class="header-anchor" href="#floaty" aria-hidden="true">#</a> floaty</h1><p>The floaty module provides functions to display custom hover windows on the screen, control the size and position of the hover window, etc.</p><p>The hover window is automatically closed when the script stops running, so to keep the hover window from being closed, an empty setInterval can be used, e.g.</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token function">setInterval</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h2 id="floaty-window-layout" tabindex="-1"><a class="header-anchor" href="#floaty-window-layout" aria-hidden="true">#</a> floaty.window(layout)</h2><ul><li><code><span class="token property">layout</span></code> {xml} | {View} The XML or View of the hover window interface</li></ul><p>Specifies the layout of the hover window, creates and <strong>displays</strong> a hover window, and returns a <code><span class="token property">FloatyWindow</span></code> object.</p><p>The hover window comes with close, resize and reposition buttons, and can be shown or hidden by calling the <code><span class="token function">setAdjustEnabled</span><span class="token punctuation">(</span><span class="token punctuation">)</span></code> function as needed.</p><p>Where the layout parameter can be an xml layout or a View, see the description of the ui module for more information.</p><p>Example.</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">var</span> w <span class="token operator">=</span> floaty<span class="token punctuation">.</span><span class="token function">window</span><span class="token punctuation">(</span>
    <span class="token operator">&lt;</span>frame gravity<span class="token operator">=</span><span class="token string">&quot;center&quot;</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>text id<span class="token operator">=</span><span class="token string">&quot;text&quot;</span><span class="token operator">&gt;</span>Hover text<span class="token operator">&lt;</span><span class="token operator">/</span>text
    <span class="token operator">&lt;</span><span class="token operator">/</span>frame
<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
    w<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">2000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>This code will display hover text on the screen after it runs and will disappear after two seconds.</p><p>Also, since the script runs in a thread other than the UI thread, and all modifications to the control need to be performed in the UI thread, you need to use <code>ui<span class="token punctuation">.</span>run</code>, for example:</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>ui<span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    w<span class="token punctuation">.</span>text<span class="token punctuation">.</span><span class="token function">setText</span><span class="token punctuation">(</span><span class="token string">&quot;text&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>For a description of the returned <code><span class="token property">FloatyWindow</span></code> object, see the <code><span class="token property">FloatyWindow</span></code> section below.</p><h2 id="floaty-rawwindow-layout" tabindex="-1"><a class="header-anchor" href="#floaty-rawwindow-layout" aria-hidden="true">#</a> floaty.rawWindow(layout)</h2><ul><li><code><span class="token property">layout</span></code> {xml} | {View} The XML or View of the hover window interface</li></ul><p>Specifies the layout of the hover window, creating and <strong>displaying</strong> a raw hover window, returning a <code><span class="token property">FloatyRawWindow</span></code> object.</p><p>Unlike the <code>floaty<span class="token punctuation">.</span><span class="token function">window</span><span class="token punctuation">(</span><span class="token punctuation">)</span></code> function, this hover window does not add any additional facilities (e.g. resize, position buttons) and you can write any layout you need.</p><p>Moreover, the hover window supports full fullscreen and can override the status bar, so you can do applications like eye protection mode.</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">var</span> w <span class="token operator">=</span> floaty<span class="token punctuation">.</span><span class="token function">rawWindow</span><span class="token punctuation">(</span>
    <span class="token operator">&lt;</span>frame gravity<span class="token operator">=</span><span class="token string">&quot;center&quot;</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>text id<span class="token operator">=</span><span class="token string">&quot;text&quot;</span><span class="token operator">&gt;</span>Hover text<span class="token operator">&lt;</span><span class="token operator">/</span>text
    <span class="token operator">&lt;</span><span class="token operator">/</span>frame
<span class="token punctuation">)</span><span class="token punctuation">;</span>

w<span class="token punctuation">.</span><span class="token function">setPosition</span><span class="token punctuation">(</span><span class="token number">500</span><span class="token punctuation">,</span> <span class="token number">500</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
    w<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">2000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>This code will display hover text on the screen after it runs and will disappear after two seconds.</p><p>For a description of the returned <code><span class="token property">FloatyRawWindow</span></code> object, see the <code><span class="token property">FloatyRawWindow</span></code> section below.</p><h2 id="floaty-closeall" tabindex="-1"><a class="header-anchor" href="#floaty-closeall" aria-hidden="true">#</a> floaty.closeAll()</h2><p>Closes all hover windows of this script.</p><h2 id="floaty-checkpermission" tabindex="-1"><a class="header-anchor" href="#floaty-checkpermission" aria-hidden="true">#</a> floaty.checkPermission()</h2><ul><li>Returns {boolean}</li></ul><p>Returns whether or not the current application has hover window permissions. (no permission request action will be triggered)</p><h2 id="floaty-requestpermission" tabindex="-1"><a class="header-anchor" href="#floaty-requestpermission" aria-hidden="true">#</a> floaty.requestPermission()</h2><p>Jump to the system&#39;s hover permission request screen.</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span> $floaty<span class="token punctuation">.</span><span class="token function">checkPermission</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// No hover permission, prompt the user and jump the request</span>
    <span class="token function">toast</span><span class="token punctuation">(</span><span class="token string">&quot;This script requires hover permission to display the hover window, please allow and rerun this script in a subsequent screen.&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">;</span>
    $floaty<span class="token punctuation">.</span><span class="token function">requestPermission</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">exit</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;Hover window permission already exists&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Note that this function does not block execution and does not wait for hover permission to be granted.</p><h1 id="floatywindow" tabindex="-1"><a class="header-anchor" href="#floatywindow" aria-hidden="true">#</a> FloatyWindow</h1><p>The FloatyWindow object, which can be used to get the elements on the FloatyWindow interface via <code>FloatyWindow<span class="token punctuation">.</span><span class="token punctuation">{</span>id<span class="token punctuation">}</span></code>. For example, if the id of a control on the window is aaa, then <code>window<span class="token punctuation">.</span>aaa</code> will get the control, similar to ui.</p><h2 id="window-setadjustenabled-enabled" tabindex="-1"><a class="header-anchor" href="#window-setadjustenabled-enabled" aria-hidden="true">#</a> window.setAdjustEnabled(enabled)</h2><ul><li><code><span class="token property">enabled</span></code> {boolean} enable or disable hover window adjustment (size, position)</li></ul><p>if enabled is true, display position- and size-adjustable markers in the top-left and top-right corners of the hover window, just like the console. If enabled is false, the above markers are hidden.</p><h2 id="window-setposition-x-y" tabindex="-1"><a class="header-anchor" href="#window-setposition-x-y" aria-hidden="true">#</a> window.setPosition(x, y)</h2><ul><li><code><span class="token property">x</span></code> {number} x</li><li><code><span class="token property">x</span></code> {number} y</li></ul><p>Set the position of the hover window.</p><h2 id="window-getx" tabindex="-1"><a class="header-anchor" href="#window-getx" aria-hidden="true">#</a> window.getX()</h2><p>Return the x coordinate of the hover window position.</p><h2 id="window-gety" tabindex="-1"><a class="header-anchor" href="#window-gety" aria-hidden="true">#</a> window.getY()</h2><p>Return the y coordinate of the hover window position.</p><h2 id="window-setsize-width-height" tabindex="-1"><a class="header-anchor" href="#window-setsize-width-height" aria-hidden="true">#</a> window.setSize(width, height)</h2><ul><li><code><span class="token property">width</span></code> {number} width</li><li><code><span class="token property">height</span></code> {number} height</li></ul><p>Set the width and height of the hover window.</p><h2 id="window-getwidth" tabindex="-1"><a class="header-anchor" href="#window-getwidth" aria-hidden="true">#</a> window.getWidth()</h2><p>Return the width of the hover window.</p><h2 id="window-getheight" tabindex="-1"><a class="header-anchor" href="#window-getheight" aria-hidden="true">#</a> window.getHeight()</h2><p>Return the height of the hover window.</p><h2 id="window-close" tabindex="-1"><a class="header-anchor" href="#window-close" aria-hidden="true">#</a> window.close()</h2><p>Close the hover window. If the hover window is already closed, this function will not perform any action.</p><p>The closed hover window cannot be displayed again.</p><h2 id="window-exitonclose" tabindex="-1"><a class="header-anchor" href="#window-exitonclose" aria-hidden="true">#</a> window.exitOnClose()</h2><p>Causes the hover window to automatically end the script when it is closed.</p><h2 id="floatyrawwindow" tabindex="-1"><a class="header-anchor" href="#floatyrawwindow" aria-hidden="true">#</a> FloatyRawWindow</h2><p>Raw hover window object that can be used to get the elements on the hover window interface via <code>window<span class="token punctuation">.</span><span class="token punctuation">{</span>id<span class="token punctuation">}</span></code>. For example, if the id of a control on the hover window is aaa, then <code>window<span class="token punctuation">.</span>aaa</code> will get that control, similar to ui.</p><h2 id="window-settouchable-touchable" tabindex="-1"><a class="header-anchor" href="#window-settouchable-touchable" aria-hidden="true">#</a> window.setTouchable(touchable)</h2><ul><li><code><span class="token property">touchable</span></code> {Boolean} whether touchable</li></ul><p>Set whether the hover window is touchable or not. If true, the hover window will receive touch and click events and cannot be passed below the hover window; if false, touch and click events on the hover window will be passed directly below the hover window. For security reasons, touch events that are received by the hover window cannot be passed on to the lower level.</p><p>This feature can be used to create eye-protection mode scripts.</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">var</span> w <span class="token operator">=</span> floaty<span class="token punctuation">.</span><span class="token function">rawWindow</span><span class="token punctuation">(</span>
    <span class="token operator">&lt;</span>frame gravity<span class="token operator">=</span><span class="token string">&quot;center&quot;</span> bg<span class="token operator">=</span><span class="token string">&quot;#44ffcc00&quot;</span><span class="token operator">/</span><span class="token operator">&gt;</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>

w<span class="token punctuation">.</span><span class="token function">setSize</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
w<span class="token punctuation">.</span><span class="token function">setTouchable</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
    w<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">4000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="window-setposition-x-y-1" tabindex="-1"><a class="header-anchor" href="#window-setposition-x-y-1" aria-hidden="true">#</a> window.setPosition(x, y)</h2><ul><li><code><span class="token property">x</span></code> {number} x</li><li><code><span class="token property">x</span></code> {number} y</li></ul><p>Set the hover window position.</p><h2 id="window-getx-1" tabindex="-1"><a class="header-anchor" href="#window-getx-1" aria-hidden="true">#</a> window.getX()</h2><p>Return the x coordinate of the hover window position.</p><h2 id="window-gety-1" tabindex="-1"><a class="header-anchor" href="#window-gety-1" aria-hidden="true">#</a> window.getY()</h2><p>Return the y coordinate of the hover window position.</p><h2 id="window-setsize-width-height-1" tabindex="-1"><a class="header-anchor" href="#window-setsize-width-height-1" aria-hidden="true">#</a> window.setSize(width, height)</h2><ul><li><code><span class="token property">width</span></code> {number} width</li><li><code><span class="token property">height</span></code> {number} height</li></ul><p>Set the width and height of the hover window.</p><p>In particular, if set to -1, it will fill the full screen; if set to -2, it will be based on the size of the hover window content. For example.</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">var</span> w <span class="token operator">=</span> floaty<span class="token punctuation">.</span><span class="token function">rawWindow</span><span class="token punctuation">(</span>
    <span class="token operator">&lt;</span>frame gravity<span class="token operator">=</span><span class="token string">&quot;center&quot;</span> bg<span class="token operator">=</span><span class="token string">&quot;#77ff0000&quot;</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>text id<span class="token operator">=</span><span class="token string">&quot;text&quot;</span><span class="token operator">&gt;</span>Hover text<span class="token operator">&lt;</span><span class="token operator">/</span>text
    <span class="token operator">&lt;</span><span class="token operator">/</span>frame
<span class="token punctuation">)</span><span class="token punctuation">;</span>

w<span class="token punctuation">.</span><span class="token function">setSize</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
    w<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">2000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="window-getwidth-1" tabindex="-1"><a class="header-anchor" href="#window-getwidth-1" aria-hidden="true">#</a> window.getWidth()</h2><p>Return the width of the hover window.</p><h2 id="window-getheight-1" tabindex="-1"><a class="header-anchor" href="#window-getheight-1" aria-hidden="true">#</a> window.getHeight()</h2><p>Return the height of the hover window.</p><h2 id="window-close-1" tabindex="-1"><a class="header-anchor" href="#window-close-1" aria-hidden="true">#</a> window.close()</h2><p>Close the hover window. If the hover window is already closed, this function will not perform any action.</p><p>The closed hover window cannot be displayed again.</p><h2 id="window-exitonclose-1" tabindex="-1"><a class="header-anchor" href="#window-exitonclose-1" aria-hidden="true">#</a> window.exitOnClose()</h2><p>Causes the hover window to automatically end the script when it is closed.</p>`,84),i=[o];function p(c,l){return a(),s("div",null,i)}const u=n(t,[["render",p],["__file","floaty.html.vue"]]);export{u as default};
