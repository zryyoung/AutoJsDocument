import{_ as o}from"./_plugin-vue_export-helper.cdc0426e.js";import{o as p,c,a as n,b as s,d as t,e,r as l}from"./app.6aa2b576.js";const i={},r=n("h1",{id:"\u7B2C\u4E09\u65B9\u63D2\u4EF6",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#\u7B2C\u4E09\u65B9\u63D2\u4EF6","aria-hidden":"true"},"#"),s(" \u7B2C\u4E09\u65B9\u63D2\u4EF6")],-1),u=n("p",null,"\u8FD9\u91CC\u4E3B\u8981\u63D0\u4F9B\u7531\u7B2C\u4E09\u65B9\u5F00\u53D1\u8005\u5F00\u53D1\u7684Auto.js\u63D2\u4EF6\u3002",-1),d={class:"custom-container tip"},k=n("p",{class:"custom-container-title"},"\u63D0\u793A",-1),h={href:"https://blog.autojs.org/2022/09/13/pro-9-2-release-notes/",target:"_blank",rel:"noopener noreferrer"},m=n("h2",{id:"pytorch\u63D2\u4EF6",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#pytorch\u63D2\u4EF6","aria-hidden":"true"},"#"),s(" Pytorch\u63D2\u4EF6")],-1),v=n("blockquote",null,[n("p",null,[s("\u672C\u63D2\u4EF6\u53CA\u6587\u6863\u7531\u7B2C\u4E09\u65B9\u5F00\u53D1\u8005"),n("code",null,"\u6D69\u7136"),s("\u5F00\u53D1\u548C\u63D0\u4F9B\uFF0C\u7279\u6B64\u611F\u8C22\u3002")])],-1),b={href:"https://wws.lanzoux.com/iiz67lpzf3e",target:"_blank",rel:"noopener noreferrer"},g=n("strong",null,"\u5BC6\u7801: 4n6x",-1),y=e('<p>\u6B32\u4F7F\u7528\u672C\u6A21\u5757\uFF0C\u8BF7\u5B89\u88C5Pytorch-AjPlugin\u6269\u5C55\u63D2\u4EF6\u3002\u5E76\u4F7F\u7528<code><span class="token keyword">let</span> pytorch <span class="token operator">=</span> $plugins<span class="token punctuation">.</span><span class="token function">load</span><span class="token punctuation">(</span><span class="token string">&quot;com.hraps.pytorch&quot;</span><span class="token punctuation">)</span></code>\u4EE3\u7801\u52A0\u8F7D\u3002</p><p>Pytorch\u6A21\u5757\u63D0\u4F9B\u4E86\u5DF2\u5B8C\u6210\u7684\u6DF1\u5EA6\u5B66\u4E60\u795E\u7ECF\u7F51\u7EDC\u6A21\u578B\u5728\u5B89\u5353\u8BBE\u5907\u4E0A\u6267\u884C\u7684\u529F\u80FD\uFF0C\u53EF\u4EE5\u5B9E\u73B0\u5E38\u89C4\u7A0B\u5E8F\u96BE\u4EE5\u5B9E\u73B0\u7684\u529F\u80FD\uFF0C\u5982\uFF1A\u56FE\u50CF\u8BC6\u522B\uFF0C\u8BED\u8A00\u7FFB\u8BD1\uFF0C\u8BED\u8A00\u95EE\u7B54\u7B49\u3002</p><p>\u4F7F\u7528\u524D\u9700\u786E\u4FDD\u5DF2\u6709\u8BAD\u7EC3\u5B8C\u6210\u7684\u795E\u7ECF\u7F51\u7EDC\u6A21\u578B\uFF0C\u901A\u8FC7Python\u5C06\u6A21\u578B\u6587\u4EF6\u8F6C\u5316\u4E3A\u5B89\u5353\u811A\u672C\u578B\u6587\u4EF6\uFF0C\u901A\u8FC7Python\u51FD\u6570<code>torch<span class="token punctuation">.</span>jit<span class="token punctuation">.</span><span class="token function">trace</span><span class="token punctuation">(</span>model<span class="token punctuation">,</span> input_tensor<span class="token punctuation">)</span></code>\u3002</p>',3),f=n("code",null,"\u6D69\u7136",-1),x={href:"http://tangshusen.me/Dive-into-DL-PyTorch/#/",target:"_blank",rel:"noopener noreferrer"},q=e(`<p>\u53EF\u901A\u8FC7<code>pytorch<span class="token punctuation">.</span><span class="token function">debugOd</span><span class="token punctuation">(</span><span class="token punctuation">)</span></code>\u6D4B\u8BD5\u8BBE\u5907\u652F\u6301\u6027\uFF0C\u4E5F\u53EF\u770B\u5230\u672C\u6A21\u5757\u5728\u56FE\u50CF\u68C0\u6D4B\u4E0A\u7684\u4F18\u8D28\u8BC6\u522B\u6548\u679C\u3002</p><h3 id="pytorch\u6743\u91CD\u5BFC\u51FA\u6307\u5BFC" tabindex="-1"><a class="header-anchor" href="#pytorch\u6743\u91CD\u5BFC\u51FA\u6307\u5BFC" aria-hidden="true">#</a> Pytorch\u6743\u91CD\u5BFC\u51FA\u6307\u5BFC</h3><p>\u9700\u8981\u5C06<code><span class="token punctuation">.</span>pt</code>\u6587\u4EF6\u8F6C\u6362\u4E3A<code><span class="token punctuation">.</span>torchscript<span class="token punctuation">.</span>pt</code>\u6587\u4EF6\u624D\u53EF\u5728\u79FB\u52A8\u7AEF\u8FDB\u884C\u9002\u914D\uFF0C\u901A\u8FC7\u5F20\u91CF\u6D41\u8FFD\u8E2A\uFF0C\u5C06\u6A21\u578B\u8F6C\u5316\u81F3\u79FB\u52A8\u7AEF\u53EF\u4F7F\u7528\u3002\u6A21\u578B\u5BF9\u7B2C\u4E09\u65B9\u652F\u6301\u5E93\u5E76\u4E0D\u53CB\u597D\uFF0C\u5EFA\u8BAE\u4F7F\u7528\u7EAFPytorch\u7F16\u5199\u795E\u7ECF\u7F51\u7EDC\u6A21\u578B\u5E76\u8BAD\u7EC3\u3002</p><p>\u4EE5\u4E0B\u4E3A\u7535\u8111\u7AEFPython\u8F6C\u6362\u811A\u672C\u3002</p><div class="language-python ext-py line-numbers-mode"><pre class="language-python"><code>model <span class="token operator">=</span> make_model<span class="token punctuation">(</span><span class="token string">&#39;resnet18&#39;</span><span class="token punctuation">)</span> <span class="token comment"># \u5BFC\u5165\u6A21\u578B\u7ED3\u6784</span>
model<span class="token punctuation">.</span>load_state_dict<span class="token punctuation">(</span>torch<span class="token punctuation">.</span>load<span class="token punctuation">(</span>model_pt<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment"># \u52A0\u8F7D\u8BAD\u7EC3\u5B8C\u6210\u7684\u6743\u91CD\u53C2\u6570</span>
model<span class="token punctuation">.</span><span class="token builtin">eval</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment"># \u6A21\u578B\u8BBE\u4E3A\u8BC4\u4F30\u6A21\u5F0F,\u4E00\u5B9A\u8981\u5F00\u542F\u8BE5\u6A21\u5F0F</span>
input_tensor <span class="token operator">=</span> torch<span class="token punctuation">.</span>rand<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">224</span><span class="token punctuation">,</span><span class="token number">224</span><span class="token punctuation">)</span> <span class="token comment"># \u8BBE\u5B9A\u8F93\u5165\u6570\u636E\u683C\u5F0F,\u6B64\u5904\u6A21\u62DF\u4E86224*224\u7684rgb3\u901A\u9053\u56FE\u7247\u7684\u683C\u5F0F\uFF0C\u751F\u6210\u968F\u673A\u5F20\u91CF\u3002</span>
mobile <span class="token operator">=</span> torch<span class="token punctuation">.</span>jit<span class="token punctuation">.</span>trace<span class="token punctuation">(</span>model<span class="token punctuation">,</span> input_tensor<span class="token punctuation">,</span>strict<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">)</span> <span class="token comment"># \u6A21\u578B\u8F6C\u5316</span>
mobile <span class="token operator">=</span> optimize_for_mobile<span class="token punctuation">(</span>mobile<span class="token punctuation">)</span> <span class="token comment"># \u79FB\u52A8\u7AEF\u4F18\u5316(\u53EF\u9009)</span>
mobile<span class="token punctuation">.</span>save<span class="token punctuation">(</span>mobile_pt<span class="token punctuation">)</span> <span class="token comment"># \u4FDD\u5B58\u6587\u4EF6</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="\u57FA\u5C42\u51FD\u6570" tabindex="-1"><a class="header-anchor" href="#\u57FA\u5C42\u51FD\u6570" aria-hidden="true">#</a> \u57FA\u5C42\u51FD\u6570</h3><h4 id="pytorch-load-path-device" tabindex="-1"><a class="header-anchor" href="#pytorch-load-path-device" aria-hidden="true">#</a> pytorch.load(path[,device])</h4><ul><li><code><span class="token property">path</span></code> {String} \u6A21\u578B\u6240\u5728\u8DEF\u5F84</li><li><code><span class="token property">device</span></code> {int} \u6267\u884C\u8BBE\u5907\uFF0C0\u4E3ACPU\uFF0C1\u4E3AVULKAN\uFF0C\u9ED8\u8BA4\u4E3A0\u3002</li><li>\u8FD4\u56DE {PytorchModule}</li></ul><p>\u5BFC\u5165\u7F51\u7EDC\u6A21\u578B\u3002\u4EC5\u6709\u5C11\u90E8\u5206\u8BBE\u5907\u652F\u6301VULKAN,\u53EF\u4E0D\u4F7F\u7528device\u53C2\u6570\u3002</p><p>\u5F53path\u7684\u503C\u4E3A&quot;yolov5s&quot;\u65F6\u4F1A\u5BFC\u5165\u5185\u7F6E\u76EE\u6807\u68C0\u6D4B\u6A21\u578B\uFF0C\u5F53path\u503C\u4E3A&quot;textcnn\u65F6\u4F1A\u5BFC\u5165\u5185\u7F6E\u60C5\u611F\u5206\u6790\u6A21\u578B\u3002&quot;</p><h4 id="pytoch-forward-module-input" tabindex="-1"><a class="header-anchor" href="#pytoch-forward-module-input" aria-hidden="true">#</a> pytoch.forward(module,input)</h4><ul><li><code><span class="token property">module</span></code> {PytorchModule} \u5DF2\u5BFC\u5165\u7684\u795E\u7ECF\u7F51\u7EDC\u6A21\u578B\u3002</li><li><code><span class="token property">input</span></code> {Tensor} \u6A21\u578B\u8F93\u5165\u5F20\u91CF\u3002</li><li>\u8FD4\u56DE {Tensor} \u6A21\u578B\u7684\u8F93\u51FA\u5F20\u91CF\u3002</li></ul><p>\u6267\u884C\u7F51\u7EDC\u6A21\u578B\u5411\u524D\u63A8\u8FDB\uFF0C\u5F97\u5230\u8BA1\u7B97\u7ED3\u679C\u3002</p><h4 id="pytoch-forwardtuple-module-input" tabindex="-1"><a class="header-anchor" href="#pytoch-forwardtuple-module-input" aria-hidden="true">#</a> pytoch.forwardTuple(module,input)</h4><ul><li><code><span class="token property">module</span></code> {PytorchModule} \u5DF2\u5BFC\u5165\u7684\u795E\u7ECF\u7F51\u7EDC\u6A21\u578B\u3002</li><li><code><span class="token property">input</span></code> {Tensor} \u6A21\u578B\u8F93\u5165\u5F20\u91CF\u3002</li><li>\u8FD4\u56DE {Tensor} \u6A21\u578B\u7684\u8F93\u51FA\u5F20\u91CF\u3002</li></ul><p>\u6267\u884C\u7F51\u7EDC\u6A21\u578B\u5411\u524D\u63A8\u8FDB\uFF0C\u5F97\u5230\u8BA1\u7B97\u7ED3\u679C\u3002</p><p>\u4E0Epytorch.forward()\u7684\u533A\u522B\u5728\u4E8E\uFF0C\u4ED6\u8FD4\u56DE\u7684\u662F\u8F93\u51FA\u4E2D\u5143\u7EC4\u7684\u9996\u9879\uFF0C\u9002\u7528\u4E8E\u5BF9\u5E94\u7684\u6A21\u578B\uFF0C\u4F8B\u5982\u76EE\u6807\u68C0\u6D4B\u6A21\u578B\u3002 \u4ED6\u7684\u672C\u8D28\u5B9E\u9645\u4E0A\u662Fmodule.forward(IValue.from(inputTensor)).toTuple()[0].toTensor()\u3002</p><h4 id="pytorch-destory-module" tabindex="-1"><a class="header-anchor" href="#pytorch-destory-module" aria-hidden="true">#</a> pytorch.destory(module)</h4><ul><li><code><span class="token property">module</span></code> {PytorchModule} \u8981\u91CA\u653E\u7684\u795E\u7ECF\u7F51\u7EDC\u6A21\u578B\u3002</li></ul><p>\u91CA\u653E\u795E\u7ECF\u7F51\u7EDC\u3002</p><h3 id="tensor\u7C7B" tabindex="-1"><a class="header-anchor" href="#tensor\u7C7B" aria-hidden="true">#</a> Tensor\u7C7B</h3><p>\u5F20\u91CF\u7C7B\u4E3A\u795E\u7ECF\u7F51\u7EDC\u7684\u901A\u7528\u8F93\u5165\u8F93\u51FA\u6570\u636E\u7ED3\u6784\uFF0C\u4FBF\u4E8E\u7F51\u7EDC\u7684\u9AD8\u901F\u5904\u7406\uFF0C\u4E3A\u4E00\u4E2A\u9AD8\u7EF4\u6570\u7EC4\u3002\u5982\u4E00\u5F20\u56FE\u7247\uFF0C\u5927\u5C0F100<em>200\uFF0C\u6709RGB 3\u901A\u9053\uFF0C\u90A3\u4ED6\u5728\u4F20\u5165\u795E\u7ECF\u7F51\u7EDC\u524D\u4F1A\u5148\u8F6C\u6362\u6210100</em>200*3\u957F\u7684\u6D6E\u70B9\u6570\u6570\u7EC4\u3002</p><h4 id="pytorch-fromblob-arr-shape" tabindex="-1"><a class="header-anchor" href="#pytorch-fromblob-arr-shape" aria-hidden="true">#</a> pytorch.fromBlob(arr,shape)</h4><ul><li><code><span class="token property">arr</span></code> {List} js\u6570\u7EC4</li><li><code><span class="token property">shape</span></code> {List&lt;Long&gt;} \u8F6C\u6362\u540E\u5F20\u91CF\u7684\u5F62\u72B6</li><li>\u8FD4\u56DE {Tensor} \u751F\u6210\u7684\u5F20\u91CF</li></ul><p>\u4ECEjs\u6570\u7EC4\u6784\u9020\u5F20\u91CF\u3002</p><h4 id="tensor-getdataasfloatarray" tabindex="-1"><a class="header-anchor" href="#tensor-getdataasfloatarray" aria-hidden="true">#</a> tensor.getDataAsFloatArray()</h4><ul><li>\u8FD4\u56DE {List&lt;float&gt;} \u8FD4\u56DE\u5F20\u91CF\u8F6C\u6362\u6210\u7684float\u6D6E\u70B9\u6570\u7EC4</li></ul><p>\u5C06\u5F20\u91CF\u8F6C\u6362\u6210\u6D6E\u70B9\u6570\u7EC4\u3002</p><h4 id="tensor-getdataas-byte-double-float-int-long-array" tabindex="-1"><a class="header-anchor" href="#tensor-getdataas-byte-double-float-int-long-array" aria-hidden="true">#</a> tensor.getDataAs[Byte/Double/Float/Int/Long]Array()</h4><ul><li>\u8FD4\u56DE {List&lt;...&gt;} \u8FD4\u56DE\u5F20\u91CF\u8F6C\u6362\u540E\u7684\u6570\u7EC4</li></ul><p>\u5C06\u5F20\u91CF\u8F6C\u6362\u6210\u5404\u7C7B\u578B\u6570\u7EC4\u3002</p><h3 id="objectdetection-\u76EE\u6807\u68C0\u6D4B-\u529F\u80FD\u51FD\u6570" tabindex="-1"><a class="header-anchor" href="#objectdetection-\u76EE\u6807\u68C0\u6D4B-\u529F\u80FD\u51FD\u6570" aria-hidden="true">#</a> ObjectDetection \u76EE\u6807\u68C0\u6D4B-\u529F\u80FD\u51FD\u6570</h3><p>\u76EE\u6807\u68C0\u6D4B\u7528\u4E8E\u5206\u6790\u56FE\u50CF\u4E2D\u5404\u7C7B\u7269\u54C1\u7684\u4F4D\u7F6E\u53CA\u5176\u7C7B\u578B\uFF0C\u5982\u6709\u4E0D\u61C2\u53EF\u4F7F\u7528pytorch.debugOd()\u67E5\u770B\u6548\u679C\u5662\u3002</p><h4 id="pytorch-debugod-modulepath-classpath" tabindex="-1"><a class="header-anchor" href="#pytorch-debugod-modulepath-classpath" aria-hidden="true">#</a> pytorch.debugOd([modulePath,classPath])</h4><ul><li><code><span class="token property">modulePath</span></code> {String} \u6A21\u578B\u6587\u4EF6\u8DEF\u5F84 (.pt/.pth\u6587\u4EF6)</li><li><code><span class="token property">classPath</span></code> {String} \u6807\u7B7E\u540D\u6587\u4EF6\u8DEF\u5F84 (.txt\u6587\u4EF6)</li></ul><p>\u6D4B\u8BD5\u76EE\u6807\u68C0\u6D4B\u6A21\u578B\u6587\u4EF6\uFF0C\u542F\u52A8\u5185\u7F6E\u8C03\u8BD5\u9875\u3002</p><p>\u7A7A\u4F20\u5165\u53EF\u4F7F\u7528\u5185\u7F6E\u76EE\u6807\u68C0\u6D4B\u6743\u91CD\uFF0C\u6D4B\u8BD5\u8BBE\u5907\u652F\u6301\u6027\u3002\u5373\u76F4\u63A5pytorch.debugOd()\u3002</p><h4 id="pytorch-liveod-modulepath-classpath" tabindex="-1"><a class="header-anchor" href="#pytorch-liveod-modulepath-classpath" aria-hidden="true">#</a> pytorch.liveOd(modulePath,classPath)</h4><ul><li><code><span class="token property">modulePath</span></code> {String} \u6A21\u578B\u6587\u4EF6\u8DEF\u5F84 (.pt/.pth\u6587\u4EF6)</li><li><code><span class="token property">classPath</span></code> {String} \u6807\u7B7E\u540D\u6587\u4EF6\u8DEF\u5F84 (.txt\u6587\u4EF6)</li></ul><p>\u8FDB\u5165\u6444\u50CF\u5934\u5B9E\u65F6\u8BC6\u522B\u9875\u9762\uFF0C\u67E5\u770B\u52A8\u6001\u63A8\u6D41\u7ED3\u679C\u3002</p><h4 id="objectdetection-od-\u76EE\u6807\u68C0\u6D4B-\u5E38\u7528\u51FD\u6570" tabindex="-1"><a class="header-anchor" href="#objectdetection-od-\u76EE\u6807\u68C0\u6D4B-\u5E38\u7528\u51FD\u6570" aria-hidden="true">#</a> ObjectDetection(OD) \u76EE\u6807\u68C0\u6D4B-\u5E38\u7528\u51FD\u6570</h4><p>\u7528\u4E8E\u81EA\u884C\u642D\u5EFA\u76EE\u6807\u68C0\u6D4B\u7F51\u7EDC\uFF0C\u63D0\u4F9B\u5E38\u7528\u7684\u51FD\u6570\u3002</p><h4 id="pytorch-getiou-a-b" tabindex="-1"><a class="header-anchor" href="#pytorch-getiou-a-b" aria-hidden="true">#</a> pytorch.getIOU(a,b)</h4><ul><li><code><span class="token property">a</span></code> {Rect} \u8303\u56F4a</li><li><code><span class="token property">b</span></code> {Rect} \u8303\u56F4b</li><li>\u8FD4\u56DE {float} IOU\u503C</li></ul><p>\u8BA1\u7B97\u4E24\u77E9\u5F62\u7684\u91CD\u5408\u7387(IOU\u503C)\uFF0C\u91CD\u53E0\u9762\u79EF\u6BD4\u603B\u5360\u9762\u79EF\u3002</p><h4 id="pytorch-bitmaptotensor-img-mean-std" tabindex="-1"><a class="header-anchor" href="#pytorch-bitmaptotensor-img-mean-std" aria-hidden="true">#</a> pytorch.bitmapToTensor(img[,mean,std])</h4><ul><li><code><span class="token property">img</span></code> {Bitmap} \u539F\u59CB\u56FE\u50CF</li><li><code><span class="token property">mean</span></code> {List&lt;float&gt;} \u5F52\u4E00\u5316\u5E73\u5747\u503C\uFF0C\u9ED8\u8BA4\u503C\u4E3A[0.485, 0.456, 0.406]</li><li><code><span class="token property">std</span></code> {List&lt;float&gt;} \u5F52\u4E00\u5316\u6807\u51C6\u5DEE\uFF0C\u9ED8\u8BA4\u503C\u4E3A[0.229, 0.224, 0.225]</li><li>\u8FD4\u56DE {Tensor} \u56FE\u50CF\u8F6C\u6362\u540E\u7684Tensor\u5F20\u91CF</li></ul><p>\u5C06\u56FE\u50CF\u8F6C\u6362\u6210Tensor\u5F20\u91CF\u7C7B\u578B\uFF0C\u4FBF\u4E8E\u8F93\u5165\u81F3\u7F51\u7EDC\u6A21\u578B\u3002\u56FE\u50CF\u9700\u4F7F\u7528bitmap\u7C7B\u578B\uFF0C\u5982\u56FE\u50CF\u662FAutojs\u4E2D\u7684image\u7C7B\u578B\uFF0C\u53EF\u901A\u8FC7image.getBitmap()\u8F6C\u6362\u81F3bitmap\u3002</p><p>mean\u548Cstd\u503C\u7528\u4E8E\u5C06\u56FE\u7247\u989C\u8272\u5F52\u4E00\u5316\u5230\u4E00\u5B9A\u8303\u56F4\u4E4B\u95F4\uFF0C\u8BF7\u6839\u636E\u6A21\u578B\u8BAD\u7EC3\u503C\u7EDF\u4E00\u8BBE\u7F6E\u3002\u4E0D\u6E05\u695A\u53EF\u8BBE\u7F6E\u4E3A[0,0,0] [1,1,1]\u3002</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>img <span class="token operator">=</span> images<span class="token punctuation">.</span><span class="token function">read</span><span class="token punctuation">(</span><span class="token string">&quot;/sdcard/a.jpg&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
inputTensor <span class="token operator">=</span> pytorch<span class="token punctuation">.</span><span class="token function">bitmapToTensor</span><span class="token punctuation">(</span>img<span class="token punctuation">.</span><span class="token function">getBitmap</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="pytorch-floatstoresults-floats-row-column-imgscalex-imgscaley-threshold" tabindex="-1"><a class="header-anchor" href="#pytorch-floatstoresults-floats-row-column-imgscalex-imgscaley-threshold" aria-hidden="true">#</a> pytorch.floatsToResults(floats,row,column,imgScaleX,imgScaleY[,threshold])</h4><ul><li><code><span class="token property">floats</span></code> {List&lt;float&gt;} Yolo\u6A21\u578B\u7684\u8F93\u51FA\u6570\u7EC4</li><li><code><span class="token property">row</span></code> {int} \u8F93\u51FA\u7ED3\u679C\u4E2A\u6570</li><li><code><span class="token property">column</span></code> {int} \u6BCF\u4E2A\u7ED3\u679C\u7684\u6570\u636E\u91CF</li><li><code><span class="token property">imgScaleX</span></code> {float} \u56FE\u50CFX\u8F74\u7F29\u653E\u6BD4\u4F8B</li><li><code><span class="token property">imgScaleY</span></code> {float} \u56FE\u50CFY\u8F74\u7F29\u653E\u6BD4\u4F8B</li><li><code><span class="token property">threshold</span></code> {float} \u4FDD\u7559\u7ED3\u679C\u7684\u7F6E\u4FE1\u5EA6\u6700\u4F4E\u503C</li><li>\u8FD4\u56DE {List&lt;OdResult&gt;} \u6240\u6709\u7684\u8F93\u51FA\u7ED3\u679C</li></ul><p>\u5C06Yolo\u6A21\u578B\u7684\u8F93\u51FA\u7ED3\u679C\u6570\u7EC4\u8F6C\u6362\u6210\u8BC6\u522B\u7ED3\u679C\u7C7B\u3002floats\u4E3A\u8F93\u51FA\u603B\u6570\u636E\uFF0Cfloats.length\u5E94\u7B49\u4E8Erow*column\u3002</p><p>\u5728\u8F93\u5165\u6A21\u578B\u65F6\u6709\u5C06\u56FE\u7247\u538B\u7F29\u6210\u7F51\u7EDC\u7684\u56FA\u5B9A\u8F93\u5165\u5927\u5C0F\uFF0C\u5728\u8FD9\u53EF\u901A\u8FC7\u8F93\u5165imgScale\u7684XY\u503C\u53CD\u5411\u8BA1\u7B97\u7ED3\u679C\u4F4D\u7F6E\u5728\u539F\u56FE\u4E2D\u7684\u5750\u6807\u3002</p><p>Yolo\u7C7B\u6A21\u578B\u7684\u8F93\u51FA\u7531\u4E00\u4E2A\u4E2A\u68C0\u6D4B\u5757\u6784\u6210\uFF0C\u6BCF\u4E2A\u68C0\u6D4B\u5757\u4F1A\u56FA\u5B9A\u8F93\u51FA\u7ED3\u679C\u4E2D\u5FC3\u70B9\u5728\u5176\u4E2D\u7684\u9884\u6D4B\u7ED3\u679C\uFF0C\u6BCF\u4E2A\u68C0\u6D4B\u7ED3\u679C\u7531\u7F6E\u4FE1\u5EA6\uFF0C\u4F4D\u7F6E\uFF0C\u6BCF\u4E2A\u7C7B\u578B\u7684\u6982\u7387\u6784\u6210\u3002 \u5982\u5728\u5185\u7F6EYolo\u6A21\u578B\u4E2D\uFF0C\u6BCF\u4E2A\u8F93\u51FA\u5305\u542B\u8FD9\u4E2A\u7ED3\u679C\u7684\u8FB9\u6846(x,y,w,h)\u51714\u4E2A\u503C\uFF0C\u8FD9\u4E2A\u7ED3\u679C\u7684\u7F6E\u4FE1\u5EA6(\u5373\u6B63\u786E\u7387) 1\u4E2A\u503C\uFF0C\u8FD9\u4E2A\u7ED3\u679C\u662F\u6BCF\u4E2A\u7C7B\u578B\u7684\u6982\u7387\uFF0C\u5982\u8F93\u51FA\u4F1A\u6709[car:0.2,bus:0.9,boat:0.1]\u8FD9\u7C7B\u6570\u636E\uFF0C\u5185\u7F6E\u6A21\u578B\u5171\u53EF\u8BC6\u522B80\u79CD\u7269\u54C1\u3002\u6240\u4EE5\u6700\u7EC8\u7684column\u503C\u4E3A4+1+80=85\u3002 row\u5757\u5373\u4E3A\u68C0\u6D4B\u5757\u7684\u6570\u91CF\uFF0C\u6BCF\u4E2A\u68C0\u6D4B\u5757\u6709column\u4E2A\u8F93\u51FA\u6570\u91CF\u3002</p><h4 id="pytorch-usenms-results-limit-threshold" tabindex="-1"><a class="header-anchor" href="#pytorch-usenms-results-limit-threshold" aria-hidden="true">#</a> pytorch.useNMS(results[,limit,threshold])</h4><ul><li><code><span class="token property">results</span></code> {List&lt;OdResult&gt;} \u5168\u90E8\u8F93\u51FA\u7ED3\u679C</li><li><code><span class="token property">limit</span></code> {int} \u6700\u5927\u5269\u4F59\u7ED3\u679C\u9650\u5236</li><li><code><span class="token property">threshold</span></code> {float} \u8FB9\u6846\u91CD\u590D\u7387\u9608\u503C</li><li>\u8FD4\u56DE {List&lt;OdResult&gt;} NMS\u5904\u7406\u540E\u7684\u7ED3\u679C</li></ul><p>\u8FC7\u6EE4\u6982\u7387\u91CD\u590D\u7684\u7ED3\u679C\u3002NMS\u7B97\u6CD5\u5373NonMaxSuppression\uFF0C\u53BB\u9664\u8FB9\u6846\u4E2D\u91CD\u590D\u7387\u9AD8\u4E8Ethreshold\u7684\u7ED3\u679C\u3002</p><h3 id="odresult\u7C7B" tabindex="-1"><a class="header-anchor" href="#odresult\u7C7B" aria-hidden="true">#</a> OdResult\u7C7B</h3><p>\u7528\u4E8E\u8868\u793A\u76EE\u6807\u68C0\u6D4B\u5355\u4E2A\u7ED3\u679C\u7684\u7C7B\uFF0C\u5305\u542Brect\uFF0Cscore\uFF0CclassId\u4E09\u4E2A\u53C2\u6570\u7684\u590D\u5408\u7C7B\u3002</p><h4 id="odresuult-score" tabindex="-1"><a class="header-anchor" href="#odresuult-score" aria-hidden="true">#</a> odResuult.score</h4><ul><li><code><span class="token property">score</span></code> {float} \u83B7\u53D6\u8BE5\u7ED3\u679C\u7684\u7F6E\u4FE1\u5EA6\uFF0C\u7C7B\u4F3C\u4E8E\u6B63\u786E\u7387</li></ul><h4 id="odresult-rect" tabindex="-1"><a class="header-anchor" href="#odresult-rect" aria-hidden="true">#</a> odResult.rect</h4><ul><li><code><span class="token property">rect</span></code> {Rect} \u83B7\u53D6\u8BE5\u7ED3\u679C\u7684\u8FB9\u6846\u4F4D\u7F6E\uFF0C\u6709\u5173rect\u53EF\u89C1images\u6A21\u5757\u7684\u6587\u6863</li></ul><h4 id="odresult-classindex" tabindex="-1"><a class="header-anchor" href="#odresult-classindex" aria-hidden="true">#</a> odResult.classIndex</h4><ul><li><code><span class="token property">classIndex</span></code> {int} \u8BE5\u76EE\u6807\u7684\u7C7B\u578B\u5E8F\u53F7</li></ul><h3 id="naturallanguageprocessing-nlp-\u81EA\u7136\u8BED\u8A00\u7C7B\u5904\u7406\u51FD\u6570" tabindex="-1"><a class="header-anchor" href="#naturallanguageprocessing-nlp-\u81EA\u7136\u8BED\u8A00\u7C7B\u5904\u7406\u51FD\u6570" aria-hidden="true">#</a> NaturalLanguageProcessing(NLP) \u81EA\u7136\u8BED\u8A00\u7C7B\u5904\u7406\u51FD\u6570</h3><p>\u63D0\u4F9B\u81EA\u7136\u8BED\u8A00\u5904\u7406\u6A21\u578B\u7684\u76F8\u5173\u51FD\u6570</p><h4 id="pytorch-debugtec-modulepath-vocabpath" tabindex="-1"><a class="header-anchor" href="#pytorch-debugtec-modulepath-vocabpath" aria-hidden="true">#</a> pytorch.debugTec([modulePath,vocabPath])</h4><ul><li><code><span class="token property">modulePath</span></code> {String} \u6A21\u578B\u6587\u4EF6\u8DEF\u5F84 (.pt/.pth\u6587\u4EF6)</li><li><code><span class="token property">vocabPath</span></code> {String} \u8BCD\u6C47\u5E8F\u53F7\u6587\u4EF6\u8DEF\u5F84 (.txt\u6587\u4EF6)</li></ul><p>\u6D4B\u8BD5\u81EA\u7136\u8BED\u8A00\u60C5\u611F\u5206\u6790TextCNN\u6A21\u578B\u6587\u4EF6\uFF0C\u542F\u52A8\u5185\u7F6E\u8C03\u8BD5\u9875\u3002</p><p>\u7A7A\u4F20\u5165\u53EF\u4F7F\u7528\u5185\u7F6E\u60C5\u611F\u5206\u6790\u6743\u91CD\uFF0C\u6D4B\u8BD5\u8BBE\u5907\u652F\u6301\u6027\u3002\u5373\u76F4\u63A5pytorch.debugTEC()\u3002</p><h4 id="pytorch-simplifysentence-sentence" tabindex="-1"><a class="header-anchor" href="#pytorch-simplifysentence-sentence" aria-hidden="true">#</a> pytorch.simplifySentence(sentence)</h4><ul><li><code><span class="token property">sentence</span></code> {String} \u8F93\u5165\u8BED\u53E5\u3002</li><li>\u8FD4\u56DE {String} \u5316\u7B80\u540E\u7684\u8BED\u53E5\u3002</li></ul><p>\u7B80\u5316\u82F1\u6587\u8BED\u53E5\u3002\u4EC5\u4FDD\u7559\u5B57\u6BCD\u6570\u5B57\u5E76\u5168\u964D\u4E3A\u5C0F\u5199\u5904\u7406\u3002</p><h3 id="vocab\u7C7B" tabindex="-1"><a class="header-anchor" href="#vocab\u7C7B" aria-hidden="true">#</a> Vocab\u7C7B</h3><p>\u8BCD\u6C47\u8868\u7C7B\uFF0C\u63D0\u4F9B\u8F83\u9AD8\u6548\u7684\u8BCD\u6C47\u4E0E\u5E8F\u53F7\u95F4\u7684\u8F6C\u6362\u529F\u80FD\u3002</p><h4 id="pytorch-vocabpath-path" tabindex="-1"><a class="header-anchor" href="#pytorch-vocabpath-path" aria-hidden="true">#</a> pytorch.vocabPath(path)</h4><ul><li><code><span class="token property">path</span></code> {String} \u8BCD\u6C47\u8868\u6587\u4EF6\u8DEF\u5F84</li><li>\u8FD4\u56DE {Vocab} \u8BCD\u6C47\u8868\u5B9E\u4F53</li></ul><p>\u6587\u4EF6\u5E94\u7531\u6BCF\u884C\u4E00\u4E2A\u5355\u8BCD\u6784\u6210\uFF0C\u884C\u53F7\u548C\u5355\u8BCD\u7684\u5BF9\u5E94\u5173\u7CFB\u5E94\u4E0E\u6A21\u578B\u8BAD\u7EC3\u65F6\u4F7F\u7528\u7684\u8BCD\u5411\u91CF\u6587\u4EF6\u4E00\u81F4\u3002</p><h4 id="pytorch-vocab-words" tabindex="-1"><a class="header-anchor" href="#pytorch-vocab-words" aria-hidden="true">#</a> pytorch.vocab(words)</h4><ul><li><code><span class="token property">words</span></code> {List&lt;String&gt;} \u8BCD\u6C47\u5217\u8868</li><li>\u8FD4\u56DE {Vocab} \u8BCD\u6C47\u8868\u5B9E\u4F53</li></ul><h4 id="vocab-size" tabindex="-1"><a class="header-anchor" href="#vocab-size" aria-hidden="true">#</a> vocab.size()</h4><ul><li>\u8FD4\u56DE {long} \u8BCD\u6C47\u8868\u5927\u5C0F</li></ul><p>\u83B7\u53D6\u8BE5\u8BCD\u6C47\u8868\u7684\u5185\u542B\u6709\u7684\u8BCD\u6C47\u91CF\u3002</p><h4 id="vocab-getword-id" tabindex="-1"><a class="header-anchor" href="#vocab-getword-id" aria-hidden="true">#</a> vocab.getWord(id)</h4><ul><li><code><span class="token property">id</span></code> {long} \u8BCD\u6C47\u5E8F\u53F7</li><li>\u8FD4\u56DE {String} \u8BCD\u6C47\u6587\u672C</li></ul><p>\u83B7\u53D6\u8BCD\u6C47\u8868\u4E2D\u8BCD\u6C47\u5E8F\u53F7\u5BF9\u5E94\u7684\u8BCD\u6C47\u3002</p><h4 id="vocab-getid-word" tabindex="-1"><a class="header-anchor" href="#vocab-getid-word" aria-hidden="true">#</a> vocab.getId(word)</h4><ul><li><code><span class="token property">word</span></code> {String} \u8BCD\u6C47\u6587\u672C</li><li>\u8FD4\u56DE {long} \u8BCD\u6C47\u5E8F\u53F7</li></ul><p>\u83B7\u53D6\u8BCD\u6C47\u8868\u4E2D\u8BCD\u6C47\u6587\u672C\u5BF9\u5E94\u7684\u5E8F\u53F7\u3002</p><h4 id="vocab-getwords-ids-length" tabindex="-1"><a class="header-anchor" href="#vocab-getwords-ids-length" aria-hidden="true">#</a> vocab.getWords(ids[,length])</h4><ul><li><code><span class="token property">ids</span></code> {List&lt;long&gt;} \u8BCD\u6C47\u5E8F\u53F7</li><li><code><span class="token property">length</span></code> {int} \u8FD4\u56DE\u5217\u8868\u7684\u957F\u5EA6</li><li>\u8FD4\u56DE {List&lt;String&gt;} \u8BCD\u6C47\u6587\u672C</li></ul><p>\u83B7\u53D6\u8BCD\u6C47\u8868\u4E2D\u591A\u4E2A\u8BCD\u6C47\u5E8F\u53F7\u7684\u8BCD\u6C47\u6587\u672C\u5217\u8868\u3002</p><h4 id="vocab-getids-words-length" tabindex="-1"><a class="header-anchor" href="#vocab-getids-words-length" aria-hidden="true">#</a> vocab.getIds(words[,length])</h4><ul><li><code><span class="token property">words</span></code> {List&lt;String&gt;} \u8BCD\u6C47\u6587\u672C</li><li><code><span class="token property">length</span></code> {int} \u8FD4\u56DE\u5217\u8868\u7684\u957F\u5EA6\uFF0C\u7A7A\u7F3A\u5904\u88650\u3002</li><li>\u8FD4\u56DE {List&lt;long&gt;} \u8BCD\u6C47\u5E8F\u53F7</li></ul><p>\u83B7\u53D6\u8BCD\u6C47\u8868\u4E2D\u591A\u4E2A\u8BCD\u6C47\u95EE\u672C\u7684\u8BCD\u6C47\u5E8F\u53F7\u5217\u8868\u3002</p><h3 id="\u4F7F\u7528\u4F8B\u5B50" tabindex="-1"><a class="header-anchor" href="#\u4F7F\u7528\u4F8B\u5B50" aria-hidden="true">#</a> \u4F7F\u7528\u4F8B\u5B50</h3><h4 id="\u56FE\u50CF\u76EE\u6807\u68C0\u6D4B-yolov5s\u6A21\u578B" tabindex="-1"><a class="header-anchor" href="#\u56FE\u50CF\u76EE\u6807\u68C0\u6D4B-yolov5s\u6A21\u578B" aria-hidden="true">#</a> \u56FE\u50CF\u76EE\u6807\u68C0\u6D4B(Yolov5s\u6A21\u578B)</h4><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token doc-comment comment">/**
 * Pytorch\u63D2\u4EF6 \u76EE\u6807\u68C0\u6D4B\u7B97\u6CD5 Yolov5\u6A21\u578B \u5B9E\u73B0\u793A\u4F8B
 * 
 * \u4F5C\u8005: \u6D69\u7136\uFF08Q:2125764918\uFF09
 */</span>



<span class="token comment">//\u4F53\u9A8C\u672C\u63D2\u4EF6\u53EF\u89C6\u5316\u8BC6\u522B\u6548\u679C\uFF0C\u53EF\u4F7F\u7528\u6B64\u4E09\u884C\u4EE3\u7801\uFF1A</span>
<span class="token comment">/*
pytorch = $plugins.load(&quot;com.hraps.pytorch&quot;)
pytorch.debugOd()
exit()
*/</span>


<span class="token comment">//\u5BFC\u5165\u63D2\u4EF6\u6A21\u5757</span>
pytorch <span class="token operator">=</span> $plugins<span class="token punctuation">.</span><span class="token function">load</span><span class="token punctuation">(</span><span class="token string">&quot;com.hraps.pytorch&quot;</span><span class="token punctuation">)</span>

<span class="token comment">//\u5BFC\u5165\u795E\u7ECF\u7F51\u7EDC\u6A21\u578B \u8F93\u5165\u6A21\u578B\u6587\u4EF6\u8DEF\u5F84 (\u6B64\u5904\u5BFC\u5165\u4E86\u5185\u7F6EYolov5s\u6A21\u578B)</span>
<span class="token keyword">var</span> model <span class="token operator">=</span> pytorch<span class="token punctuation">.</span><span class="token function">load</span><span class="token punctuation">(</span><span class="token string">&quot;yolov5s&quot;</span><span class="token punctuation">)</span>
<span class="token comment">//\u5BFC\u5165\u8BC6\u522B\u7ED3\u679C\u5BF9\u5E94\u7C7B\u578B\u540D \uFF08\u4E3A\u7C7B\u540D\u6784\u6210\u7684\u5B57\u7B26\u4E32\u6570\u7EC4,\u53EF\u81EA\u5DF1\u5199\u6B7B\uFF0C\u5982[&quot;car&quot;,&quot;plane&quot;,&quot;person&quot;...]\uFF09</span>
<span class="token keyword">var</span> classes <span class="token operator">=</span> pytorch<span class="token punctuation">.</span><span class="token function">getCocoClasses</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token comment">//\u5B9A\u4E49\u6A21\u578B\u8F93\u5165\u56FE\u7247\u7684\u8FB9\u957F \u8F93\u5165\u7EF4\u5EA6\u4E3Aw*h*3</span>
<span class="token keyword">var</span> inputWidth <span class="token operator">=</span> <span class="token number">640</span>
<span class="token keyword">var</span> inputHeight <span class="token operator">=</span> <span class="token number">640</span>
<span class="token comment">//\u5B9A\u4E49\u6A21\u578B\u8F93\u51FA\u6570\u91CF\u4EE5\u53CA\u6BCF\u4E2A\u7684\u5927\u5C0F \u8F93\u51FA\u7EF4\u5EA6\u4E3Arow*column</span>
<span class="token comment">//row\u4E3Ayolo\u6A21\u578B\u7684\u5206\u683C\u6570\uFF0C\u7531\u8F93\u5165\u5927\u5C0F\u6709\u5173</span>
<span class="token keyword">var</span> outputRow <span class="token operator">=</span> <span class="token number">25200</span>
<span class="token comment">//column\u4E3A\u6BCF\u4E2A\u5206\u683C\u7684\u7EF4\u5EA6\uFF0C\u7531 \u4F4D\u7F6E(x,y,w,h)4\u4E2A\u503C,\u5206\u6570(score)1\u4E2A\u503C,\u7C7B\u578B(coco\u6570\u636E\u96C680\u4E2A\u7C7B)80\u4E2A\u503C\uFF0C\u5171\u8BA185\u4E2A\u503C</span>
<span class="token keyword">var</span> outputColumn <span class="token operator">=</span> <span class="token number">4</span> <span class="token operator">+</span> <span class="token number">1</span> <span class="token operator">+</span> <span class="token number">80</span>

<span class="token comment">//\u5BFC\u5165\u9700\u8BC6\u522B\u7684\u56FE\u7247</span>
<span class="token keyword">var</span> img <span class="token operator">=</span> images<span class="token punctuation">.</span><span class="token function">read</span><span class="token punctuation">(</span><span class="token string">&quot;/sdcard/DCIM/Camera/b.jpg&quot;</span><span class="token punctuation">)</span>
<span class="token comment">//\u7F29\u653E\u81F3\u6A21\u578B\u8F93\u5165\u7EF4\u5EA6</span>
<span class="token keyword">var</span> inputImg <span class="token operator">=</span> images<span class="token punctuation">.</span><span class="token function">resize</span><span class="token punctuation">(</span>img<span class="token punctuation">,</span> <span class="token punctuation">[</span>inputWidth<span class="token punctuation">,</span> inputHeight<span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token comment">//\u56FE\u7247\u8F6C\u6362\u81F3\u5F20\u91CF MEAN\u548CSTD\u503C\u8BBE\u7F6E\u4E3A000\u548C111\uFF0C\u5373\u4E0D\u542F\u7528\u7279\u6B8A\u5F52\u4E00\u5316</span>
inputTensor <span class="token operator">=</span> pytorch<span class="token punctuation">.</span><span class="token function">bitmapToTensor</span><span class="token punctuation">(</span>inputImg<span class="token punctuation">.</span><span class="token function">getBitmap</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token comment">//\u6267\u884C\u795E\u7ECF\u7F51\u7EDC\u63A8\u8FDB \u83B7\u5F97\u8F93\u51FA\u5F20\u91CF</span>
output <span class="token operator">=</span> pytorch<span class="token punctuation">.</span><span class="token function">forwardTuple</span><span class="token punctuation">(</span>model<span class="token punctuation">,</span> inputTensor<span class="token punctuation">)</span>
<span class="token comment">//\u5F20\u91CF\u8F6C\u6D6E\u70B9\u6570\u7EC4</span>
f <span class="token operator">=</span> output<span class="token punctuation">.</span><span class="token function">getDataAsFloatArray</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;\u6A21\u578B\u8F93\u51FA\u7EF4\u5EA6: &quot;</span> <span class="token operator">+</span> f<span class="token punctuation">.</span>length<span class="token punctuation">)</span>

<span class="token comment">//\u8BA1\u7B97\u56FE\u5F62\u7F29\u653E\u6BD4\u4F8B</span>
imgScaleX <span class="token operator">=</span> img<span class="token punctuation">.</span><span class="token function">getWidth</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">/</span> inputWidth
imgScaleY <span class="token operator">=</span> img<span class="token punctuation">.</span><span class="token function">getHeight</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">/</span> inputHeight
<span class="token comment">//\u8FD8\u539F\u8BC6\u522B\u7ED3\u679C\u7684\u771F\u5B9E\u4F4D\u7F6E \u8F6C\u6362\u81F3\u76EE\u6807\u68C0\u6D4B\u7ED3\u679C\u7C7B\u6570\u7EC4</span>
results <span class="token operator">=</span> pytorch<span class="token punctuation">.</span><span class="token function">floatsToResults</span><span class="token punctuation">(</span>f<span class="token punctuation">,</span> outputRow<span class="token punctuation">,</span> outputColumn<span class="token punctuation">,</span> imgScaleX<span class="token punctuation">,</span> imgScaleY<span class="token punctuation">)</span>
<span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;\u7F51\u7EDC\u521D\u59CB\u8BC6\u522B\u6570\u91CF: &quot;</span> <span class="token operator">+</span> results<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token comment">//NMS\u7B97\u6CD5\u8FC7\u6EE4\u91CD\u590D\u7ED3\u679C</span>
nmsResults <span class="token operator">=</span> pytorch<span class="token punctuation">.</span><span class="token function">useNMS</span><span class="token punctuation">(</span>results<span class="token punctuation">)</span>
<span class="token function">toastLog</span><span class="token punctuation">(</span><span class="token string">&quot;\u6700\u7EC8\u7ED3\u679C\u6570\u91CF: &quot;</span> <span class="token operator">+</span> nmsResults<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token comment">//\u904D\u5386\u8F93\u51FA\u7ED3\u679C</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> nmsResults<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    result <span class="token operator">=</span> nmsResults<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span>
    rect <span class="token operator">=</span> result<span class="token punctuation">.</span>rect
    str <span class="token operator">=</span> <span class="token string">&quot;\u7C7B\u578B: &quot;</span> <span class="token operator">+</span> classes<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>result<span class="token punctuation">.</span>classIndex<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;  \u7F6E\u4FE1\u5EA6: &quot;</span> <span class="token operator">+</span> result<span class="token punctuation">.</span>score <span class="token operator">+</span> <span class="token string">&quot;   \u4F4D\u7F6E: \u5DE6&quot;</span> <span class="token operator">+</span> rect<span class="token punctuation">.</span>left <span class="token operator">+</span> <span class="token string">&quot; \u4E0A&quot;</span> <span class="token operator">+</span> rect<span class="token punctuation">.</span>top <span class="token operator">+</span> <span class="token string">&quot; \u53F3&quot;</span> <span class="token operator">+</span> rect<span class="token punctuation">.</span>right <span class="token operator">+</span> <span class="token string">&quot; \u4E0B&quot;</span> <span class="token operator">+</span> rect<span class="token punctuation">.</span>bottom<span class="token punctuation">;</span>
    <span class="token function">log</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="\u81EA\u7136\u8BED\u8A00\u60C5\u611F\u5206\u6790-textcnn\u6A21\u578B" tabindex="-1"><a class="header-anchor" href="#\u81EA\u7136\u8BED\u8A00\u60C5\u611F\u5206\u6790-textcnn\u6A21\u578B" aria-hidden="true">#</a> \u81EA\u7136\u8BED\u8A00\u60C5\u611F\u5206\u6790(TextCNN\u6A21\u578B)</h4><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token doc-comment comment">/**
 * Pytorch\u63D2\u4EF6 \u8BED\u8A00\u60C5\u611F\u5206\u6790\u7B97\u6CD5 TextCNN\u6A21\u578B \u5B9E\u73B0\u793A\u4F8B
 * 
 * \u4F5C\u8005: \u6D69\u7136\uFF08Q:2125764918\uFF09
 */</span>


<span class="token comment">//\u4F53\u9A8C\u672C\u63D2\u4EF6\u6548\u679C\uFF0C\u53EF\u4F7F\u7528\u6B64\u884C\u4EE3\u7801\uFF1A</span>
<span class="token comment">/*
pytorch = $plugins.load(&quot;com.hraps.pytorch&quot;)
pytorch.debugTec()
exit()
*/</span>


<span class="token comment">//\u9700\u8BC6\u522B\u7684\u8BED\u53E5</span>
<span class="token keyword">var</span> text <span class="token operator">=</span> <span class="token string">&quot;The program is useful!&quot;</span>

<span class="token comment">//\u5BFC\u5165\u63D2\u4EF6\u6A21\u5757</span>
pytorch <span class="token operator">=</span> $plugins<span class="token punctuation">.</span><span class="token function">load</span><span class="token punctuation">(</span><span class="token string">&quot;com.hraps.pytorch&quot;</span><span class="token punctuation">)</span>
<span class="token comment">//\u5BFC\u5165\u795E\u7ECF\u7F51\u7EDC\u6A21\u578B \u8F93\u5165\u6A21\u578B\u6587\u4EF6\u8DEF\u5F84 (\u6B64\u5904\u5BFC\u5165\u4E86\u5185\u7F6Etextcnn\u6A21\u578B)</span>
<span class="token keyword">var</span> model <span class="token operator">=</span> pytorch<span class="token punctuation">.</span><span class="token function">load</span><span class="token punctuation">(</span><span class="token string">&quot;textcnn&quot;</span><span class="token punctuation">)</span>
<span class="token comment">//\u5BFC\u5165\u8BCD\u6C47\u8868 \u7531\u4E00\u884C\u4E00\u5355\u8BCD\u7684txt\u6587\u4EF6\u6784\u6210 \u884C\u53F7\u548C\u5355\u8BCD\u5E94\u4E0E\u6A21\u578B\u8BAD\u7EC3\u65F6\u8BCD\u5411\u91CF\u5E8F\u53F7\u5BF9\u5E94 (\u6B64\u5904\u5BFC\u5165\u4E86\u5185\u7F6E\u6A21\u578B\u5BF9\u5E94\u8BCD\u6C47\u8868)</span>
<span class="token keyword">var</span> vocab <span class="token operator">=</span> pytorch<span class="token punctuation">.</span><span class="token function">getTextcnnVocab</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;\u8BCD\u6C47\u8868\u5BFC\u5165\u6210\u529F\uFF0C\u5171\u8BA1&quot;</span> <span class="token operator">+</span> vocab<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;\u4E2A&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//\u8BED\u53E5\u7B80\u5355\u5316\u5904\u7406 \u8FC7\u6EE4\u6807\u70B9 \u5168\u90E8\u5C0F\u5199</span>
<span class="token keyword">var</span> textSimple <span class="token operator">=</span> pytorch<span class="token punctuation">.</span><span class="token function">simplifySentence</span><span class="token punctuation">(</span>text<span class="token punctuation">)</span>
<span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;\u7B80\u5355\u5316\u8BED\u53E5: &quot;</span> <span class="token operator">+</span> textSimple<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//\u5B9A\u4E49\u6A21\u578B\u8F93\u5165\u8BCD\u6C47\u91CF\u957F\u5EA6</span>
<span class="token keyword">var</span> inputSize <span class="token operator">=</span> <span class="token number">128</span>
<span class="token comment">//\u6839\u636E\u8BCD\u6C47\u8868\u5C06\u8BED\u53E5\u6362\u6210\u8BCD\u5411\u91CF\u5E8F\u53F7 \u672A\u77E5\u5355\u8BCD\u4E0E\u957F\u5EA6\u4E0D\u8DB3\u5904\u81EA\u52A8\u88650</span>
<span class="token keyword">var</span> ids <span class="token operator">=</span> vocab<span class="token punctuation">.</span><span class="token function">getIds</span><span class="token punctuation">(</span>textSimple<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">&quot; &quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> inputSize<span class="token punctuation">)</span>
<span class="token function">log</span><span class="token punctuation">(</span>ids<span class="token punctuation">)</span>
<span class="token comment">//\u5C06\u5217\u8868\u6784\u9020\u6210Tensor\u7C7B\u578B\uFF0C\u9002\u5408\u7F51\u7EDC\u8F93\u5165</span>
<span class="token keyword">var</span> inputTensor <span class="token operator">=</span> pytorch<span class="token punctuation">.</span><span class="token function">fromBlob</span><span class="token punctuation">(</span>ids<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">128</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token comment">//\u6267\u884C\u6A21\u578B\u5F97\u5230\u8F93\u51FA\u7ED3\u679C</span>
<span class="token keyword">var</span> outPutTensor <span class="token operator">=</span> pytorch<span class="token punctuation">.</span><span class="token function">forward</span><span class="token punctuation">(</span>model<span class="token punctuation">,</span> inputTensor<span class="token punctuation">)</span>
<span class="token comment">//\u8F93\u51FA\u5F20\u91CF\u8F6C\u6362\u4E3A\u6D6E\u70B9\u6570\u7EC4</span>
<span class="token keyword">var</span> result <span class="token operator">=</span> outPutTensor<span class="token punctuation">.</span><span class="token function">getDataAsFloatArray</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;\u6A21\u578B\u8F93\u51FA: &quot;</span> <span class="token operator">+</span> result<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token string">&quot;   &quot;</span> <span class="token operator">+</span> result<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token comment">//\u5206\u6790\u7ED3\u679C</span>
console<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;\u8BED\u53E5\uFF1A&quot;</span> <span class="token operator">+</span> text<span class="token punctuation">)</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>result<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">&lt;=</span> result<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;\u7ED3\u679C\u4E3A\uFF1A\u6B63\u9762\u60C5\u611F&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;\u7ED3\u679C\u4E3A\uFF1A\u8D1F\u9762\u60C5\u611F&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="ocr\u63D2\u4EF6" tabindex="-1"><a class="header-anchor" href="#ocr\u63D2\u4EF6" aria-hidden="true">#</a> OCR\u63D2\u4EF6</h2><blockquote><p>\u672C\u63D2\u4EF6\u53CA\u6587\u6863\u7531\u7B2C\u4E09\u65B9\u5F00\u53D1\u8005<code>\u6D69\u7136</code>\u5F00\u53D1\u548C\u63D0\u4F9B\uFF0C\u7279\u6B64\u611F\u8C22\u3002</p></blockquote><p>\u8BE5\u6A21\u5757\u53EF\u5B9E\u73B0\u5BF9\u56FE\u50CF\u4E2D\u7684\u6587\u5B57\u8FDB\u884C\u8BC6\u522B,\u4F7F\u7528\u793A\u4F8B\u53EF\u89C1\u672C\u7AE0\u672B\u3002\u91C7\u7528\u4E86\u6700\u524D\u6CBF\u7684DbNet+AngleNet+CrnnNet\u7684\u6DF1\u5EA6\u5B66\u4E60\u601D\u8DEF\u5B9E\u73B0\u3002</p>`,105),w={href:"https://wws.lanzoux.com/iduulmofune",target:"_blank",rel:"noopener noreferrer"},_=n("strong",null,"\u5BC6\u7801: habv",-1),S={class:"custom-container warning"},P=n("p",{class:"custom-container-title"},"\u6CE8\u610F",-1),T=n("a",{href:"../v8/ocr"},"\u5185\u7F6E$ocr\u6A21\u5757",-1),R={href:"https://blog.autojs.org/2022/09/04/mlkit-ocr-plugin/",target:"_blank",rel:"noopener noreferrer"},j=e(`<h3 id="\u8BC6\u522B\u51FD\u6570" tabindex="-1"><a class="header-anchor" href="#\u8BC6\u522B\u51FD\u6570" aria-hidden="true">#</a> \u8BC6\u522B\u51FD\u6570</h3><h4 id="ocr-detect-img-ratio" tabindex="-1"><a class="header-anchor" href="#ocr-detect-img-ratio" aria-hidden="true">#</a> ocr.detect(img[,ratio])</h4><ul><li><code><span class="token property">img</span></code> {Bitmap} \u9700\u8BC6\u522B\u7684\u56FE\u50CF\uFF0C\u4E3ABitmap\u7C7B\u578B\uFF0CAutojs\u4E2D\u7684\u56FE\u50CF\u53EF\u901A\u8FC7\u56FE\u50CF\u7684.getBitmap()\u65B9\u6CD5\u8FDB\u884C\u8F6C\u6362\u3002</li><li><code><span class="token property">ratio</span></code> {float} \u7F29\u653E\u6BD4\u7387\uFF0C\u9ED8\u8BA4\u4E3A1\uFF0C\u5728\u8BC6\u522B\u8F83\u5C0F\u7684\u56FE\u7247\u65F6\u53EF\u9002\u5F53\u8C03\u5C0F\u3002</li><li>\u8FD4\u56DE {List&lt;OcrResult&gt;} \u8BC6\u522B\u7ED3\u679C\u6784\u6210\u7684\u5217\u8868\uFF0C\u8BE6\u60C5\u89C1\u4E0B\u6587OcrResult\u7C7B\u3002</li></ul><p>OCR\u8BC6\u522B\u51FD\u6570\uFF0C\u521D\u6B21\u8C03\u7528\u4F1A\u81EA\u52A8\u8FDB\u884C\u521D\u59CB\u5316\u3002\u4F7F\u7528\u793A\u4F8B\u53EF\u89C1\u672C\u7AE0\u672B\u3002</p><h3 id="\u7ED3\u679C\u8FC7\u6EE4\u51FD\u6570" tabindex="-1"><a class="header-anchor" href="#\u7ED3\u679C\u8FC7\u6EE4\u51FD\u6570" aria-hidden="true">#</a> \u7ED3\u679C\u8FC7\u6EE4\u51FD\u6570</h3><h4 id="ocr-filterscore-results-dbnetscore-anglescore-crnnscore" tabindex="-1"><a class="header-anchor" href="#ocr-filterscore-results-dbnetscore-anglescore-crnnscore" aria-hidden="true">#</a> ocr.filterScore(results,dbnetScore,angleScore,crnnScore)</h4><ul><li><code><span class="token property">results</span></code> {List&lt;OcrResult&gt;} \u9700\u8FC7\u6EE4\u7684\u7ED3\u679C\u5217\u8868</li><li><code><span class="token property">dbnetScore</span></code> {float} \u8BE5\u533A\u57DF\u4E3A\u6587\u5B57\u7684\u7F6E\u4FE1\u5EA6\u7684\u4E0B\u9650</li><li><code><span class="token property">angleScore</span></code> {float} \u6587\u5B57\u65B9\u5411\u7C7B\u578B\u7684\u7F6E\u4FE1\u5EA6\u7684\u4E0B\u9650</li><li><code><span class="token property">crnnScore</span></code> {float} \u6240\u6709\u6587\u5B57\u8BC6\u522B\u7684\u5E73\u5747\u7F6E\u4FE1\u5EA6\u7684\u4E0B\u9650</li><li>\u8FD4\u56DE {List&lt;OcrResult&gt;} \u8FC7\u6EE4\u540E\u7684\u7ED3\u679C\u5217\u8868</li></ul><p>\u7528\u4E8E\u8FC7\u6EE4\u4E00\u4E9B\u7F6E\u4FE1\u5EA6\u8F83\u4F4E\u7684\u7ED3\u679C\uFF0C\u4E0D\u9700\u8FC7\u6EE4\u7684\u9009\u9879\u8BF7\u586B0\u3002</p><p>\u2003</p><h3 id="ocrresult\u7C7B" tabindex="-1"><a class="header-anchor" href="#ocrresult\u7C7B" aria-hidden="true">#</a> OcrResult\u7C7B</h3><p>\u8BE5\u7C7B\u4E3AOCR\u7684\u8BC6\u522B\u7ED3\u679C\u7C7B\uFF0C\u4E00\u4E2A\u5B9E\u7C7B\u4E3A\u4E00\u4E2A\u7ED3\u679C\u9879\u3002</p><h4 id="ocrresult-text" tabindex="-1"><a class="header-anchor" href="#ocrresult-text" aria-hidden="true">#</a> ocrResult.text</h4><ul><li>{String} \u8BC6\u522B\u7ED3\u679C\u7684\u6587\u672C</li></ul><h4 id="ocrresult-frame" tabindex="-1"><a class="header-anchor" href="#ocrresult-frame" aria-hidden="true">#</a> ocrResult.frame</h4><ul><li>{List&lt;int&gt;} \u8BC6\u522B\u7ED3\u679C\u7684\u4F4D\u7F6E</li></ul><p>\u8BC6\u522B\u7ED3\u679C\u4E3A\u4E00\u4E2A\u4EFB\u610F\u56DB\u8FB9\u5F62\uFF0C\u8FD4\u56DE\u7684\u662F\u957F\u5EA6\u4E3A8\u7684\u6574\u5F62\u5217\u8868\u3002 \u5206\u522B\u4E3A\u56DB\u4E2A\u9876\u70B9\u7684\u6A2A\u7EB5\u5750\u6807\uFF0C\u5373[x1,y1,x2,y2,x3,y3,x4,y4]\u3002</p><h4 id="ocrresult-angletype" tabindex="-1"><a class="header-anchor" href="#ocrresult-angletype" aria-hidden="true">#</a> ocrResult.angleType</h4><ul><li>{int} \u7ED3\u679C\u7684\u6587\u672C\u89D2\u5EA6\u7C7B\u578B</li></ul><h4 id="ocrresult-dbnetscore" tabindex="-1"><a class="header-anchor" href="#ocrresult-dbnetscore" aria-hidden="true">#</a> ocrResult.dbnetScore</h4><ul><li>{float} \u7ED3\u679C\u533A\u57DF\u4E3A\u6587\u5B57\u7684\u7F6E\u4FE1\u5EA6</li></ul><h4 id="ocrresult-anglescore" tabindex="-1"><a class="header-anchor" href="#ocrresult-anglescore" aria-hidden="true">#</a> ocrResult.angleScore</h4><ul><li>{float} \u7ED3\u679C\u6587\u5B57\u89D2\u5EA6\u7C7B\u578B\u7684\u7F6E\u4FE1\u5EA6</li></ul><h4 id="ocrresult-crnnscore" tabindex="-1"><a class="header-anchor" href="#ocrresult-crnnscore" aria-hidden="true">#</a> ocrResult.crnnScore</h4><ul><li>{List&lt;float&gt;} \u8BC6\u522B\u7ED3\u679C\u7684\u6BCF\u4E2A\u5B57\u7684\u7F6E\u4FE1\u5EA6\u5217\u8868</li></ul><h3 id="\u4F7F\u7528\u793A\u4F8B" tabindex="-1"><a class="header-anchor" href="#\u4F7F\u7528\u793A\u4F8B" aria-hidden="true">#</a> \u4F7F\u7528\u793A\u4F8B</h3><p>\u2003</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">//\u5BFC\u5165\u63D2\u4EF6</span>
ocr <span class="token operator">=</span> $plugins<span class="token punctuation">.</span><span class="token function">load</span><span class="token punctuation">(</span><span class="token string">&quot;com.hraps.ocr&quot;</span><span class="token punctuation">)</span>
<span class="token comment">//\u5BFC\u5165\u9700\u8BC6\u522B\u7684\u56FE\u7247\uFF0C\u8BF7\u81EA\u884C\u8F93\u5165\u56FE\u7247\u8DEF\u5F84</span>
img <span class="token operator">=</span> images<span class="token punctuation">.</span><span class="token function">read</span><span class="token punctuation">(</span><span class="token string">&quot;./test.jpg&quot;</span><span class="token punctuation">)</span>
<span class="token comment">//\u8BC6\u522B\u56FE\u7247</span>
results <span class="token operator">=</span> ocr<span class="token punctuation">.</span><span class="token function">detect</span><span class="token punctuation">(</span>img<span class="token punctuation">.</span><span class="token function">getBitmap</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;\u8FC7\u6EE4\u524D\u7ED3\u679C\u6570\uFF1A&quot;</span><span class="token operator">+</span>results<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token comment">//\u8BC6\u522B\u7ED3\u679C\u8FC7\u6EE4</span>
results <span class="token operator">=</span> ocr<span class="token punctuation">.</span><span class="token function">filterScore</span><span class="token punctuation">(</span>results<span class="token punctuation">,</span><span class="token number">0.5</span><span class="token punctuation">,</span><span class="token number">0.5</span><span class="token punctuation">,</span><span class="token number">0.5</span><span class="token punctuation">)</span>
<span class="token comment">//\u8F93\u51FA\u6700\u7EC8\u7ED3\u679C</span>
<span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">var</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>i<span class="token operator">&lt;</span>results<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">var</span> re <span class="token operator">=</span> results<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span>
    <span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;\u7ED3\u679C:&quot;</span><span class="token operator">+</span>i<span class="token operator">+</span><span class="token string">&quot;  \u6587\u5B57:&quot;</span><span class="token operator">+</span>re<span class="token punctuation">.</span>text<span class="token operator">+</span><span class="token string">&quot;  \u4F4D\u7F6E:&quot;</span><span class="token operator">+</span>re<span class="token punctuation">.</span>frame<span class="token operator">+</span><span class="token string">&quot;  \u89D2\u5EA6\u7C7B\u578B:&quot;</span><span class="token operator">+</span>re<span class="token punctuation">.</span>angleType<span class="token punctuation">)</span>
    <span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;\u533A\u57DF\u7F6E\u4FE1\u5EA6:&quot;</span><span class="token operator">+</span>re<span class="token punctuation">.</span>dbScore<span class="token operator">+</span><span class="token string">&quot;  \u89D2\u5EA6\u7F6E\u4FE1\u5EA6:&quot;</span><span class="token operator">+</span>re<span class="token punctuation">.</span>angleScore<span class="token operator">+</span><span class="token string">&quot;  \u6587\u5B57\u7F6E\u4FE1\u5EA6:&quot;</span><span class="token operator">+</span>re<span class="token punctuation">.</span>crnnScore<span class="token operator">+</span><span class="token string">&quot;\\n&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,27);function L(O,N){const a=l("ExternalLinkIcon");return p(),c("div",null,[r,u,n("div",d,[k,n("p",null,[s("Pro 9.2\u4E2D\uFF0CAuto.js Pro\u5E94\u7528\u5185\u7F6E\u4E86\u63D2\u4EF6\u5546\u5E97\uFF0C\u73B0\u5728\u53EF\u5728\u63D2\u4EF6\u5546\u5E97\u4E0B\u8F7D\u63D2\u4EF6\uFF0C\u53C2\u89C1\u535A\u5BA2"),n("a",h,[s("Auto.js Pro 9.2\u7248\u672C\u6B63\u5F0F\u53D1\u5E03"),t(a)]),s("\u3002")])]),m,v,n("p",null,[n("a",b,[s("Pytorch\u63D2\u4EF6\u4E0B\u8F7D"),t(a)]),s("("),g,s(")")]),y,n("p",null,[s("\u5982\u5BF9Pytorch\u4E86\u89E3\u8F83\u5C11\uFF0C\u4E2A\u4EBA(\u6307\u63D2\u4EF6\u4F5C\u8005"),f,s(")\u63A8\u8350\u53EF\u4EE5\u53BB\u6B64\u7F51\u7AD9\u5B66\u4E60\u4E86\u89E3\uFF1A"),n("a",x,[s("\u6DF1\u5EA6\u5B66\u4E60Pytorch"),t(a)]),s("\u3002")]),q,n("p",null,[s("\u63D2\u4EF6\u4E0B\u8F7D\uFF1A"),n("a",w,[s("\u84DD\u594F\u4E91"),t(a)]),s(" ("),_,s(")")]),n("div",S,[P,n("p",null,[s("\u4ECEPro 9.2\u5F00\u59CB\uFF0C\u5B98\u65B9\u5185\u7F6E\u4E86\u5176\u4ED6OCR\u63D2\u4EF6\uFF0C\u6BD4\u5982"),T,s("\u548C"),n("a",R,[s("MLKit OCR\u63D2\u4EF6"),t(a)]),s("\uFF0C\u53EF\u9009\u62E9\u4F7F\u7528\u3002")])]),j])}const z=o(i,[["render",L],["__file","thirdPartyPlugins.html.vue"]]);export{z as default};
